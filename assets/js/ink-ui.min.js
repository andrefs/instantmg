
Ink.createModule("Ink.UI.Aux","1",["Ink.Net.Ajax_1","Ink.Dom.Css_1","Ink.Dom.Selector_1","Ink.Util.Url_1"],function(e,t,n,r){"use strict";var o={},i=0,a={Layouts:{SMALL:"small",MEDIUM:"medium",LARGE:"large"},isDOMElement:function(e){return"object"==typeof e&&"nodeType"in e&&1===e.nodeType},isInteger:function(e){return"number"==typeof e&&0===e%1},elOrSelector:function(e,t){if(!this.isDOMElement(e)){var r=n.select(e);if(0===r.length)throw new TypeError(t+" must either be a DOM Element or a selector expression!\nThe script element must also be after the DOM Element itself.");return r[0]}return e},clone:function(e){try{if("object"!=typeof e)throw Error("Given argument is not an object!");return JSON.parse(JSON.stringify(e))}catch(t){throw Error("Given object cannot have loops!")}},childIndex:function(e){if(a.isDOMElement(e))for(var t=n.select("> *",e.parentNode),r=0,o=t.length;o>r;++r)if(t[r]===e)return r;throw"not found!"},ajaxJSON:function(t,n,r){new e(t,{evalJS:"force",method:"POST",parameters:n,onSuccess:function(e){try{if(e=e.responseJSON,"ok"!==e.status)throw"server error: "+e.message;r(null,e)}catch(t){r(t)}},onFailure:function(){r("communication failure")}})},currentLayout:function(){var e,r,o,i,a,s=n.select("#ink-layout-detector")[0];if(!s){s=document.createElement("div"),s.id="ink-layout-detector";for(o in this.Layouts)this.Layouts.hasOwnProperty(o)&&(i=this.Layouts[o],a=document.createElement("div"),a.className="show-"+i+" hide-all",a.setAttribute("data-ink-layout",i),s.appendChild(a));document.body.appendChild(s)}for(e=0,r=s.childNodes.length;r>e;++e)if(a=s.childNodes[e],"hidden"!==t.getStyle(a,"visibility"))return a.getAttribute("data-ink-layout")},hashSet:function(e){if("object"!=typeof e)throw new TypeError("o should be an object!");var t=r.getAnchorString();t=Ink.extendObj(t,e),window.location.hash=r.genQueryString("",t).substring(1)},cleanChildren:function(e){if(!a.isDOMElement(e))throw"Please provide a valid DOMElement";for(var t,n=e.lastChild;n;)t=n.previousSibling,e.removeChild(n),n=t},storeIdAndClasses:function(e,t){if(!a.isDOMElement(e))throw"Please provide a valid DOMElement as first parameter";var n=e.id;n&&(t._id=n);var r=e.className;r&&(t._classes=r)},restoreIdAndClasses:function(e,t){if(!a.isDOMElement(e))throw"Please provide a valid DOMElement as first parameter";t._id&&e.id!==t._id&&(e.id=t._id),t._classes&&-1===e.className.indexOf(t._classes)&&(e.className?e.className+=" "+t._classes:e.className=t._classes),t._instanceId&&!e.getAttribute("data-instance")&&e.setAttribute("data-instance",t._instanceId)},registerInstance:function(e,t,n){if(!e._instanceId){if("object"!=typeof e)throw new TypeError("1st argument must be a JavaScript object!");if(!e._options||!e._options.skipRegister){if(!this.isDOMElement(t))throw new TypeError("2nd argument must be a DOM element!");if(void 0!==n&&"string"!=typeof n)throw new TypeError("3rd argument must be a string!");var r=(n||"instance")+ ++i;o[r]=e,e._instanceId=r;var a=t.getAttribute("data-instance");a=null!==a?[a,r].join(" "):r,t.setAttribute("data-instance",a)}}},unregisterInstance:function(e){delete o[e]},getInstance:function(e){var t;if(this.isDOMElement(e)){if(t=e.getAttribute("data-instance"),null===t)throw Error("argument is not a DOM instance element!")}else t=e;t=t.split(" ");var n,r,i,a=t.length,s=[];for(i=0;a>i;++i){if(r=t[i],!r)throw Error("Element is not a JS instance!");if(n=o[r],!n)throw Error('Instance "'+r+'" not found!');s.push(n)}return 1===a?s[0]:s},getInstanceFromSelector:function(e){var t=n.select(e)[0];if(!t)throw Error("Element not found!");return this.getInstance(t)},getInstanceIds:function(){var e=[];for(var t in o)o.hasOwnProperty(t)&&e.push(t);return e},getInstances:function(){var e=[];for(var t in o)o.hasOwnProperty(t)&&e.push(o[t]);return e},destroyComponent:function(){Ink.Util.Aux.unregisterInstance(this._instanceId),this._element.parentNode.removeChild(this._element)}};return a});
Ink.createModule("Ink.UI.Modal","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,n,i,r,o){"use strict";var s=function(e,s){if("string"!=typeof e&&"object"!=typeof e&&s.markup===void 0)throw"Invalid Modal selector";if("string"==typeof e){if(""!==e){if(this._element=r.select(e),0===this._element.length)throw"The Modal selector has not returned any elements";this._element=this._element[0]}}else e&&(this._element=e);if(this._options={width:void 0,height:void 0,shadeClass:void 0,modalClass:void 0,trigger:void 0,triggerEvent:"click",markup:void 0,onShow:void 0,onDismiss:void 0,closeOnClick:!1,responsive:!0,disableScroll:!0},this._handlers={click:Ink.bindEvent(this._onClick,this),keyDown:Ink.bindEvent(this._onKeyDown,this),resize:Ink.bindEvent(this._onResize,this)},this._wasDismissed=!1,this._markupMode=this._element?n.hasClassName(this._element,"ink-modal"):!1,this._markupMode){if(this._modalDiv=this._element,this._modalDivStyle=this._modalDiv.style,this._modalShadow=this._modalDiv.parentNode,this._modalShadowStyle=this._modalShadow.style,this._contentContainer=r.select(".modal-body",this._modalDiv),!this._contentContainer.length)throw'Missing div with class "modal-body"';this._contentContainer=this._contentContainer[0],this._options.markup=this._contentContainer.innerHTML,this._options=Ink.extendObj(this._options,i.data(this._element))}else this._modalShadow=document.createElement("div"),this._modalShadowStyle=this._modalShadow.style,this._modalDiv=document.createElement("div"),this._modalDivStyle=this._modalDiv.style,this._element&&(this._options.markup=this._element.innerHTML),n.addClassName(this._modalShadow,"ink-shade"),n.addClassName(this._modalDiv,"ink-modal"),n.addClassName(this._modalDiv,"ink-space"),this._modalShadow.appendChild(this._modalDiv),document.body.appendChild(this._modalShadow);if(this._options=Ink.extendObj(this._options,s||{}),this._markupMode||this.setContentMarkup(this._options.markup),"string"==typeof this._options.shadeClass&&o.each(this._options.shadeClass.split(" "),Ink.bind(function(e){n.addClassName(this._modalShadow,e.trim())},this)),"string"==typeof this._options.modalClass&&o.each(this._options.modalClass.split(" "),Ink.bind(function(e){n.addClassName(this._modalDiv,e.trim())},this)),"trigger"in this._options&&this._options.trigger!==void 0){var a,l;if("string"==typeof this._options.trigger&&(a=r.select(this._options.trigger),a.length>0))for(l=0;a.length>l;l++)t.observe(a[l],this._options.triggerEvent,Ink.bindEvent(this._init,this))}else this._init()};return s.prototype={_init:function(r){r&&t.stop(r);var o="CSS1Compat"===document.compatMode?document.documentElement:document.body;this._resizeTimeout=null,n.addClassName(this._modalShadow,"ink-shade"),this._modalShadowStyle.display=this._modalDivStyle.display="block",setTimeout(Ink.bind(function(){n.addClassName(this._modalShadow,"visible"),n.addClassName(this._modalDiv,"visible")},this),100),this._contentElement=this._modalDiv,this._shadeElement=this._modalShadow,this.setContentMarkup(this._options.markup),this._options.width!==void 0?(this._modalDivStyle.width=this._options.width,-1===this._options.width.indexOf("%")&&(this._modalDivStyle.maxWidth=i.elementWidth(this._modalDiv)+"px")):this._modalDivStyle.maxWidth=this._modalDivStyle.width=i.elementWidth(this._modalDiv)+"px",parseInt(o.clientWidth,10)<=parseInt(this._modalDivStyle.width,10)&&(this._modalDivStyle.width=~~(.9*parseInt(o.clientWidth,10))+"px"),this._options.height!==void 0?(this._modalDivStyle.height=this._options.height,-1===this._options.height.indexOf("%")&&(this._modalDivStyle.maxHeight=i.elementHeight(this._modalDiv)+"px")):this._modalDivStyle.maxHeight=this._modalDivStyle.height=i.elementHeight(this._modalDiv)+"px",parseInt(o.clientHeight,10)<=parseInt(this._modalDivStyle.height,10)&&(this._modalDivStyle.height=~~(.9*parseInt(o.clientHeight,10))+"px"),this.originalStatus={viewportHeight:parseInt(o.clientHeight,10),viewportWidth:parseInt(o.clientWidth,10),width:parseInt(this._modalDivStyle.maxWidth,10),height:parseInt(this._modalDivStyle.maxHeight,10)},this._options.responsive?(this._onResize(!0),t.observe(window,"resize",this._handlers.resize)):(this._resizeContainer(),this._reposition()),this._options.onShow&&this._options.onShow(this),this._options.disableScroll&&this._disableScroll(),t.observe(this._shadeElement,"click",this._handlers.click),t.observe(document,"keydown",this._handlers.keyDown),e.registerInstance(this,this._shadeElement,"modal")},_reposition:function(){this._modalDivStyle.top=this._modalDivStyle.left="50%",this._modalDivStyle.marginTop="-"+~~(i.elementHeight(this._modalDiv)/2)+"px",this._modalDivStyle.marginLeft="-"+~~(i.elementWidth(this._modalDiv)/2)+"px"},_onResize:function(e){"boolean"==typeof e?this._timeoutResizeFunction.call(this):this._resizeTimeout||"object"!=typeof e||(this._resizeTimeout=setTimeout(Ink.bind(this._timeoutResizeFunction,this),250))},_timeoutResizeFunction:function(){var e="CSS1Compat"===document.compatMode?document.documentElement:document.body,t=parseInt(e.clientHeight,10),n=parseInt(e.clientWidth,10);this._modalDivStyle.width=n>this.originalStatus.width?this._modalDivStyle.maxWidth:~~(.9*n)+"px",this._modalDivStyle.height=t>this.originalStatus.height&&parseInt(this._modalDivStyle.maxHeight,10)>=i.elementHeight(this._modalDiv)?this._modalDivStyle.maxHeight:~~(.9*t)+"px",this._resizeContainer(),this._reposition(),this._resizeTimeout=void 0},_onClick:function(e){var o=t.element(e);if(n.hasClassName(o,"ink-close")||n.hasClassName(o,"ink-dismiss")||this._options.closeOnClick&&(!i.descendantOf(this._shadeElement,o)||o===this._shadeElement)){for(var s=r.select(".ink-alert",this._shadeElement),a=s.length,l=0;a>l;l++)if(i.descendantOf(s[l],o))return;t.stop(e),this.dismiss()}},_onKeyDown:function(e){27!==e.keyCode||this._wasDismissed||this.dismiss()},_resizeContainer:function(){this._contentElement.style.overflow=this._contentElement.style.overflowX=this._contentElement.style.overflowY="hidden";var e=i.elementHeight(this._modalDiv);this._modalHeader=r.select(".modal-header",this._modalDiv),this._modalHeader.length>0&&(this._modalHeader=this._modalHeader[0],e-=i.elementHeight(this._modalHeader)),this._modalFooter=r.select(".modal-footer",this._modalDiv),this._modalFooter.length>0&&(this._modalFooter=this._modalFooter[0],e-=i.elementHeight(this._modalFooter)),this._contentContainer.style.height=e+"px",e!==i.elementHeight(this._contentContainer)&&(this._contentContainer.style.height=~~(e-(i.elementHeight(this._contentContainer)-e))+"px"),this._markupMode||(this._contentContainer.style.overflow=this._contentContainer.style.overflowX="hidden",this._contentContainer.style.overflowY="auto",this._contentElement.style.overflow=this._contentElement.style.overflowX=this._contentElement.style.overflowY="visible")},_disableScroll:function(){this._oldScrollPos=i.scroll(),this._onScrollBinded=Ink.bindEvent(function(e){var n=t.element(e);i.descendantOf(this._modalShadow,n)||(t.stop(e),window.scrollTo(this._oldScrollPos[0],this._oldScrollPos[1]))},this),t.observe(window,"scroll",this._onScrollBinded),t.observe(document,"touchmove",this._onScrollBinded)},dismiss:function(){if(this._options.onDismiss&&this._options.onDismiss(this),this._options.disableScroll&&(t.stopObserving(window,"scroll",this._onScrollBinded),t.stopObserving(document,"touchmove",this._onScrollBinded)),this._options.responsive&&t.stopObserving(window,"resize",this._handlers.resize),this._markupMode){n.removeClassName(this._modalDiv,"visible"),n.removeClassName(this._modalShadow,"visible");var e,i=Ink.bindEvent(function(){e&&(this._modalShadowStyle.display="none",t.stopObserving(document,"transitionend",i),t.stopObserving(document,"oTransitionEnd",i),t.stopObserving(document,"webkitTransitionEnd",i),clearInterval(e),e=void 0)},this);t.observe(document,"transitionend",i),t.observe(document,"oTransitionEnd",i),t.observe(document,"webkitTransitionEnd",i),e||(e=setInterval(Ink.bind(function(){this._modalShadowStyle.opacity>0||(this._modalShadowStyle.display="none",clearInterval(e),e=void 0)},this),500))}else this._modalShadow.parentNode.removeChild(this._modalShadow),this.destroy()},destroy:function(){e.unregisterInstance(this._instanceId)},getContentElement:function(){return this._contentContainer},setContentMarkup:function(e){if(this._markupMode)this._contentContainer.innerHTML=[e].join("");else{if(this._modalDiv.innerHTML=[e].join(""),this._contentContainer=r.select(".modal-body",this._modalDiv),!this._contentContainer.length){var t=r.select(".modal-header",this._modalDiv),i=r.select(".modal-footer",this._modalDiv);o.each(t,Ink.bind(function(e){e.parentNode.removeChild(e)},this)),o.each(i,Ink.bind(function(e){e.parentNode.removeChild(e)},this));var s=document.createElement("div");n.addClassName(s,"modal-body"),s.innerHTML=this._modalDiv.innerHTML,this._modalDiv.innerHTML="",o.each(t,Ink.bind(function(e){this._modalDiv.appendChild(e)},this)),this._modalDiv.appendChild(s),o.each(i,Ink.bind(function(e){this._modalDiv.appendChild(e)},this)),this._contentContainer=r.select(".modal-body",this._modalDiv)}this._contentContainer=this._contentContainer[0]}this._contentElement=this._modalDiv,this._resizeContainer()}},s});
Ink.createModule("Ink.UI.ProgressBar","1",["Ink.Dom.Selector_1","Ink.Dom.Element_1"],function(e,t){"use strict";var n=function(n,i){if("object"!=typeof n){if("string"!=typeof n)throw"[Ink.UI.ProgressBar] :: Invalid selector";if(this._element=e.select(n),1>this._element.length)throw"[Ink.UI.ProgressBar] :: Selector didn't find any elements";this._element=this._element[0]}else this._element=n;this._options=Ink.extendObj({startValue:0,onStart:function(){},onEnd:function(){}},t.data(this._element)),this._options=Ink.extendObj(this._options,i||{}),this._value=this._options.startValue,this._init()};return n.prototype={_init:function(){if(this._elementBar=e.select(".bar",this._element),1>this._elementBar.length)throw"[Ink.UI.ProgressBar] :: Bar element not found";this._elementBar=this._elementBar[0],this._options.onStart=Ink.bind(this._options.onStart,this),this._options.onEnd=Ink.bind(this._options.onEnd,this),this.setValue(this._options.startValue)},setValue:function(e){this._options.onStart(this._value),e=parseInt(e,10),isNaN(e)||0>e?e=0:e>100&&(e=100),this._value=e,this._elementBar.style.width=this._value+"%",this._options.onEnd(this._value)}},n});
Ink.createModule("Ink.UI.SmoothScroller","1",["Ink.Dom.Event_1","Ink.Dom.Selector_1","Ink.Dom.Loaded_1"],function(e,t,n){"use strict";var r={speed:10,gy:function(e){var t;if(t=e.offsetTop,e.offsetParent)for(;e=e.offsetParent;)t+=e.offsetTop;return t},scrollTop:function(){var e=document.body,t=document.documentElement;return e&&e.scrollTop?e.scrollTop:t&&t.scrollTop?t.scrollTop:window.pageYOffset?window.pageYOffset:0},add:function(t,n,r){e.observe(t,n,r)},end:function(t){return window.event?(window.event.cancelBubble=!0,window.event.returnValue=!1,void 0):(e.stop(t),void 0)},scroll:function(e){var t=Ink.UI.SmoothScroller.scrollTop();t+=e>t?Math.ceil((e-t)/Ink.UI.SmoothScroller.speed):(e-t)/Ink.UI.SmoothScroller.speed,window.scrollTo(0,t),(t===e||Ink.UI.SmoothScroller.offsetTop===t)&&clearInterval(Ink.UI.SmoothScroller.interval),Ink.UI.SmoothScroller.offsetTop=t},init:function(){n.run(Ink.UI.SmoothScroller.render)},render:function(){var n=t.select("a.scrollableLink");Ink.UI.SmoothScroller.end(this);for(var r=0;n.length>r;r++){var i=n[r];!i.href||-1===i.href.indexOf("#")||i.pathname!==location.pathname&&"/"+i.pathname!==location.pathname||(Ink.UI.SmoothScroller.add(i,"click",Ink.UI.SmoothScroller.end),e.observe(i,"click",Ink.bindEvent(Ink.UI.SmoothScroller.clickScroll,this,i)))}},clickScroll:function(e,n){if(Ink.UI.SmoothScroller.end(n),null!==n&&null!==n.getAttribute("href")){var r=n.href.indexOf("#");if(-1===r)return;var i=n.href.substr(r+1),o=t.select('a[name="'+i+'"],#'+i);if(o[0]!==void 0){if(-1===n.parentNode.className.indexOf("active")){var s=n.parentNode.parentNode,a=s.firstChild;do if(a.tagName!==void 0&&"LI"===a.tagName.toUpperCase()&&-1!==a.className.indexOf("active")){a.className=a.className.replace("active","");break}while(a=a.nextSibling);n.parentNode.className+=" active"}clearInterval(Ink.UI.SmoothScroller.interval),Ink.UI.SmoothScroller.interval=setInterval("Ink.UI.SmoothScroller.scroll("+Ink.UI.SmoothScroller.gy(o[0])+")",10)}}}};return r});
Ink.createModule("Ink.UI.SortableList","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,n,i,r,o){"use strict";var s=function(t,n){if(this._element=e.elOrSelector(t,"1st argument"),!e.isDOMElement(t)&&"string"!=typeof t)throw"[Ink.UI.SortableList] :: Invalid selector";if("string"==typeof t){if(this._element=Ink.Dom.Selector.select(t),1>this._element.length)throw"[Ink.UI.SortableList] :: Selector has returned no elements";this._element=this._element[0]}else this._element=t;if(this._options=Ink.extendObj({dragObject:"li"},Ink.Dom.Element.data(this._element)),this._options=Ink.extendObj(this._options,n||{}),this._handlers={down:Ink.bindEvent(this._onDown,this),move:Ink.bindEvent(this._onMove,this),up:Ink.bindEvent(this._onUp,this)},this._model=[],this._index=void 0,this._isMoving=!1,this._options.model instanceof Array)this._model=this._options.model,this._createdFrom="JSON";else{if("ul"!==this._element.nodeName.toLowerCase())throw new TypeError("You must pass a selector expression/DOM element as 1st option or provide a model on 2nd argument!");this._createdFrom="DOM"}if(this._dragTriggers=r.select(this._options.dragObject,this._element),!this._dragTriggers)throw"[Ink.UI.SortableList] :: Drag object not found";this._init()};return s.prototype={_init:function(){"DOM"===this._createdFrom&&(this._extractModelFromDOM(),this._createdFrom="JSON");var n="ontouchstart"in document.documentElement;this._down=n?"touchstart":"mousedown",this._move=n?"touchmove":"mousemove",this._up=n?"touchend":"mouseup";var i=document.body;t.observe(i,this._move,this._handlers.move),t.observe(i,this._up,this._handlers.up),this._observe(),e.registerInstance(this,this._element,"sortableList")},_observe:function(){t.observe(this._element,this._down,this._handlers.down)},_extractModelFromDOM:function(){this._model=[];var e=this,t=r.select("> li",this._element);o.each(t,function(t){var n=t.innerHTML;e._model.push(n)})},_generateMarkup:function(){var e=document.createElement("ul");e.className="unstyled ink-sortable-list";var t=this;return o.each(this._model,function(n,i){var r=document.createElement("li");i===t._index&&(r.className="drag"),r.innerHTML=[n].join(""),e.appendChild(r)}),e},_getY:function(e){return 0===e.type.indexOf("touch")?e.changedTouches[0].pageY:"number"==typeof e.pageY?e.pageY:e.clientY},_refresh:function(t){var n=this._generateMarkup();this._element.parentNode.replaceChild(n,this._element),this._element=n,e.restoreIdAndClasses(this._element,this),this._dragTriggers=r.select(this._options.dragObject,this._element),t||this._observe()},_onDown:function(n){if(!this._isMoving){var i=t.element(n);if(!o.inArray(i,this._dragTriggers)){for(;!o.inArray(i,this._dragTriggers)&&"body"!==i.nodeName.toLowerCase();)i=i.parentNode;if("body"===i.nodeName.toLowerCase())return}t.stop(n);var r;if("li"!==i.nodeName.toLowerCase())for(;"li"!==i.nodeName.toLowerCase()&&"body"!==i.nodeName.toLowerCase();)i=i.parentNode;return r=i,this._index=e.childIndex(r),this._height=r.offsetHeight,this._startY=this._getY(n),this._isMoving=!0,document.body.style.cursor="move",this._refresh(!1),!1}},_onMove:function(e){if(this._isMoving){t.stop(e);var n=this._getY(e),i=n-this._startY,r=i>0?1:-1,o=r*Math.floor(Math.abs(i)/this._height);if(0!==o&&(o/=Math.abs(o),!(-1===o&&0===this._index||1===o&&this._index===this._model.length-1))){var s=o>0?this._index:this._index+o,a=0>o?this._index:this._index+o;this._model.splice(s,2,this._model[a],this._model[s]),this._index+=o,this._startY=n,this._refresh(!1)}}},_onUp:function(e){this._isMoving&&(t.stop(e),this._index=void 0,this._isMoving=!1,document.body.style.cursor="",this._refresh())},getModel:function(){return this._model.slice()},destroy:e.destroyComponent},s});
Ink.createModule("Ink.UI.Spy","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,n,i,r,o){"use strict";var s=function(t,n){this._rootElement=e.elOrSelector(t,"1st argument"),this._options=Ink.extendObj({target:void 0},i.data(this._rootElement)),this._options=Ink.extendObj(this._options,n||{}),this._options.target=e.elOrSelector(this._options.target,"Target"),this._scrollTimeout=null,this._init()};return s.prototype={_elements:[],_init:function(){t.observe(document,"scroll",Ink.bindEvent(this._onScroll,this)),this._elements.push(this._rootElement)},_onScroll:function(){var e=i.scrollHeight();if(!(this._rootElement.offsetTop>e)){for(var t=0,s=this._elements.length;s>t;t++)if(e>=this._elements[t].offsetTop&&this._elements[t]!==this._rootElement&&this._elements[t].offsetTop>this._rootElement.offsetTop)return;o.each(r.select("a",this._options.target),Ink.bind(function(e){var t="name"in this._rootElement&&this._rootElement.name?"#"+this._rootElement.name:"#"+this._rootElement.id;e.href.substr(e.href.indexOf("#"))===t?n.addClassName(i.findUpwardsByTag(e,"li"),"active"):n.removeClassName(i.findUpwardsByTag(e,"li"),"active")},this))}}},s});
Ink.createModule("Ink.UI.Sticky","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(e,t,n,i,o){"use strict";var r=function(t,n){if("object"!=typeof t&&"string"!=typeof t)throw"[Sticky] :: Invalid selector defined";if("object"==typeof t)this._rootElement=t;else{if(this._rootElement=o.select(t),0>=this._rootElement.length)throw"[Sticky] :: Can't find any element with the specified selector";this._rootElement=this._rootElement[0]}this._options=Ink.extendObj({offsetBottom:0,offsetTop:0,topElement:void 0,bottomElement:void 0},i.data(this._rootElement)),this._options=Ink.extendObj(this._options,n||{}),this._options.topElement=this._options.topElement!==void 0?e.elOrSelector(this._options.topElement,"Top Element"):e.elOrSelector("body","Top Element"),this._options.bottomElement=this._options.bottomElement!==void 0?e.elOrSelector(this._options.bottomElement,"Bottom Element"):e.elOrSelector("body","Top Element"),this._computedStyle=window.getComputedStyle?window.getComputedStyle(this._rootElement,null):this._rootElement.currentStyle,this._dims={height:this._computedStyle.height,width:this._computedStyle.width},this._init()};return r.prototype={_init:function(){t.observe(document,"scroll",Ink.bindEvent(this._onScroll,this)),t.observe(window,"resize",Ink.bindEvent(this._onResize,this)),this._calculateOriginalSizes(),this._calculateOffsets()},_onScroll:function(){var e="CSS1Compat"===document.compatMode?document.documentElement:document.body;return 100*i.elementWidth(this._rootElement)/e.clientWidth>90||649>=e.clientWidth?(i.hasAttribute(this._rootElement,"style")&&this._rootElement.removeAttribute("style"),void 0):(this._scrollTimeout&&clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout(Ink.bind(function(){var e=i.scrollHeight();if(i.hasAttribute(this._rootElement,"style"))this._options.offsetTop>=e?this._rootElement.removeAttribute("style"):document.body.scrollHeight-(e+parseInt(this._dims.height,10))<this._options.offsetBottom?(this._rootElement.style.position="fixed",this._rootElement.style.top="auto",this._rootElement.style.bottom=this._options.offsetBottom<parseInt(document.body.scrollHeight-(document.documentElement.clientHeight+e),10)?this._options.originalOffsetBottom+"px":this._options.offsetBottom-parseInt(document.body.scrollHeight-(document.documentElement.clientHeight+e),10)+"px",this._rootElement.style.width=this._options.originalWidth+"px"):document.body.scrollHeight-(e+parseInt(this._dims.height,10))>=this._options.offsetBottom&&(this._rootElement.style.position="fixed",this._rootElement.style.bottom="auto",this._rootElement.style.top=this._options.originalOffsetTop+"px",this._rootElement.style.width=this._options.originalWidth+"px");else{if(this._options.offsetTop>=e)return;this._rootElement.style.position="fixed",this._rootElement.style.bottom="auto",this._rootElement.style.top=this._options.offsetTop+"px",this._rootElement.style.width=this._options.originalWidth+"px"}this._scrollTimeout=void 0},this),0),void 0)},_onResize:function(){this._resizeTimeout&&clearTimeout(this._resizeTimeout),this._resizeTimeout=setTimeout(Ink.bind(function(){this._rootElement.removeAttribute("style"),this._calculateOriginalSizes(),this._calculateOffsets()},this),0)},_calculateOffsets:function(){if(this._options.topElement!==void 0)if("body"!==this._options.topElement.nodeName.toLowerCase()){var e=i.elementHeight(this._options.topElement),t=i.elementTop(this._options.topElement);this._options.offsetTop=parseInt(e,10)+parseInt(t,10)+parseInt(this._options.originalOffsetTop,10)}else this._options.offsetTop=parseInt(this._options.originalOffsetTop,10);if(this._options.bottomElement!==void 0)if("body"!==this._options.bottomElement.nodeName.toLowerCase()){var n=i.elementHeight(this._options.bottomElement);this._options.offsetBottom=parseInt(n,10)+parseInt(this._options.originalOffsetBottom,10)}else this._options.offsetBottom=parseInt(this._options.originalOffsetBottom,10);this._onScroll()},_calculateOriginalSizes:function(){this._options.originalOffsetTop=parseInt(this._options.offsetTop,10),this._options.originalOffsetBottom=parseInt(this._options.offsetBottom,10),this._options.originalTop=parseInt(this._rootElement.offsetTop,10),isNaN(this._options.originalWidth=parseInt(this._dims.width,10))&&(this._options.originalWidth=0),this._options.originalWidth=parseInt(this._computedStyle.width,10)}},r});
Ink.createModule("Ink.UI.Table","1",["Ink.Net.Ajax_1","Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.String_1"],function(e,t,n,i,o,r,s,a){"use strict";var l=function(e,n){if(this._rootElement=t.elOrSelector(e,"1st argument"),"table"!==this._rootElement.nodeName.toLowerCase())throw"[Ink.UI.Table] :: The element is not a table";this._options=Ink.extendObj({pageSize:void 0,endpoint:void 0,loadMode:"full",allowResetSorting:!1,visibleFields:void 0},o.data(this._rootElement)),this._options=Ink.extendObj(this._options,n||{}),this._markupMode=this._options.endpoint===void 0,this._options.visibleFields&&(this._options.visibleFields=this._options.visibleFields.split(",")),this._handlers={click:Ink.bindEvent(this._onClick,this)},this._originalFields=[],this._sortableFields={},this._originalData=this._data=[],this._headers=[],this._pagination=null,this._totalRows=0,this._init()};return l.prototype={_init:function(){if(this._markupMode){if(this._setHeadersHandlers(),s.each(r.select("tbody tr",this._rootElement),Ink.bind(function(e){this._data.push(e)},this)),this._originalData=this._data.slice(0),this._totalRows=this._data.length,"pageSize"in this._options&&this._options.pageSize!==void 0){for(this._pagination=this._rootElement.nextSibling;1!==this._pagination.nodeType;)this._pagination=this._pagination.nextSibling;if("nav"!==this._pagination.nodeName.toLowerCase())throw"[Ink.UI.Table] :: Missing the pagination markup or is mis-positioned";var e=Ink.getModule("Ink.UI.Pagination",1);this._pagination=new e(this._pagination,{size:Math.ceil(this._totalRows/this._options.pageSize),onChange:Ink.bind(function(e){this._paginate(e._current+1)},this)}),this._paginate(1)}}else this._getData(this._options.endpoint,!0)},_onClick:function(e){n.stop(e);var i,l,c=n.element(e),h=o.data(c),d="pageSize"in this._options&&this._options.pageSize!==void 0;if("th"===c.nodeName.toLowerCase()&&"sortable"in h&&"true"==""+h.sortable){if(i=-1,s.inArray(c,this._headers))for(l=0;this._headers.length>l;l++)if(this._headers[l]===c){i=l;break}if(!this._markupMode&&d){for(var u in this._sortableFields)u!=="col_"+i&&(this._sortableFields[u]="none",this._headers[u.replace("col_","")].innerHTML=a.stripTags(this._headers[u.replace("col_","")].innerHTML));"asc"===this._sortableFields["col_"+i]?(this._sortableFields["col_"+i]="desc",this._headers[i].innerHTML=a.stripTags(this._headers[i].innerHTML)+'<i class="icon-caret-down"></i>'):(this._sortableFields["col_"+i]="asc",this._headers[i].innerHTML=a.stripTags(this._headers[i].innerHTML)+'<i class="icon-caret-up"></i>'),this._pagination.setCurrent(this._pagination._current)}else{if(-1===i)return;if("desc"===this._sortableFields["col_"+i]&&this._options.allowResetSorting&&"true"==""+this._options.allowResetSorting)this._headers[i].innerHTML=a.stripTags(this._headers[i].innerHTML),this._sortableFields["col_"+i]="none",this._data=this._originalData.slice(0);else{for(var u in this._sortableFields)u!=="col_"+i&&(this._sortableFields[u]="none",this._headers[u.replace("col_","")].innerHTML=a.stripTags(this._headers[u.replace("col_","")].innerHTML));this._sort(i),"asc"===this._sortableFields["col_"+i]?(this._data.reverse(),this._sortableFields["col_"+i]="desc",this._headers[i].innerHTML=a.stripTags(this._headers[i].innerHTML)+'<i class="icon-caret-down"></i>'):(this._sortableFields["col_"+i]="asc",this._headers[i].innerHTML=a.stripTags(this._headers[i].innerHTML)+'<i class="icon-caret-up"></i>')}var m=r.select("tbody",this._rootElement)[0];t.cleanChildren(m),s.each(this._data,function(e){m.appendChild(e)}),this._pagination.setCurrent(0),this._paginate(1)}}},_paginate:function(e){s.each(this._data,Ink.bind(function(t,n){n>=(e-1)*parseInt(this._options.pageSize,10)&&(e-1)*parseInt(this._options.pageSize,10)+parseInt(this._options.pageSize,10)>n?i.removeClassName(t,"hide-all"):i.addClassName(t,"hide-all")},this))},_sort:function(e){this._data.sort(Ink.bind(function(t,n){var i=r.select("td",t)[e].innerText,o=r.select("td",n)[e].innerText,s=RegExp(/\d/g);return!isNaN(i)&&s.test(i)?i=parseInt(i,10):isNaN(i)||(i=parseFloat(i)),!isNaN(o)&&s.test(o)?o=parseInt(o,10):isNaN(o)||(o=parseFloat(o)),i===o?0:i>o?1:-1},this))},_setHeaders:function(e,t){var n,i,o,s,a;if(0===(o=r.select("thead",this._rootElement)).length){o=this._rootElement.createTHead(),s=o.insertRow(0);for(n in e)this._options.visibleFields&&-1===this._options.visibleFields.indexOf(n)||(a=document.createElement("th"),i=e[n],"sortable"in i&&"true"==""+i.sortable&&a.setAttribute("data-sortable","true"),"label"in i&&(a.innerText=i.label),this._originalFields.push(n),s.appendChild(a))}else{var l=t[0];for(n in l)this._options.visibleFields&&-1===this._options.visibleFields.indexOf(n)||this._originalFields.push(n)}},_setHeadersHandlers:function(){n.observe(r.select("thead",this._rootElement)[0],"click",this._handlers.click),this._headers=r.select("thead tr th",this._rootElement),s.each(this._headers,Ink.bind(function(e,t){var n=o.data(e);"sortable"in n&&"true"==""+n.sortable&&(this._sortableFields["col_"+t]="none")},this))},_setData:function(e){var t,n,i,o,s,a;n=r.select("tbody",this._rootElement),0===n.length?(n=document.createElement("tbody"),this._rootElement.appendChild(n)):(n=n[0],n.innerHTML=""),this._data=[];for(s in e){i=document.createElement("tr"),n.appendChild(i),a=0;for(t in e[s])this._options.visibleFields&&-1===this._options.visibleFields.indexOf(t)||(o=i.insertCell(a++),o.innerHTML=e[s][t]);this._data.push(i)}this._originalData=this._data.slice(0)},setEndpoint:function(e,t){this._markupMode||(this._options.endpoint=e,this._pagination.setCurrent(t?parseInt(t,10):0))},_setPagination:function(){if("pageSize"in this._options&&this._options.pageSize!==void 0,"pageSize"in this._options&&this._options.pageSize!==void 0&&!this._pagination){this._pagination=document.createElement("nav"),this._pagination.className="ink-navigation",this._rootElement.parentNode.insertBefore(this._pagination,this._rootElement.nextSibling),this._pagination.appendChild(document.createElement("ul")).className="pagination";var e=Ink.getModule("Ink.UI.Pagination",1);this._pagination=new e(this._pagination,{size:Math.ceil(this._totalRows/this._options.pageSize),onChange:Ink.bind(function(){this._getData(this._options.endpoint)},this)})}},_getData:function(e){Ink.requireModules(["Ink.Util.Url_1"],Ink.bind(function(t){var n=t.parseUrl(e),i="pageSize"in this._options&&this._options.pageSize!==void 0,o=this._pagination?this._pagination._current+1:1;if(n.query=n.query?n.query.split("&"):[],i){n.query.push("rows_per_page="+this._options.pageSize),n.query.push("page="+o);for(var r in this._sortableFields)if("none"!==this._sortableFields[r]){n.query.push("sortField="+this._originalFields[parseInt(r.replace("col_",""),10)]),n.query.push("sortOrder="+this._sortableFields[r]);break}this._getDataViaAjax(e+"?"+n.query.join("&"))}else this._getDataViaAjax(e)},this))},_getDataViaAjax:function(t){var n="pageSize"in this._options&&this._options.pageSize!==void 0;new e(t,{method:"GET",contentType:"application/json",sanitizeJSON:!0,onSuccess:Ink.bind(function(e){if(200===e.status){var t=JSON.parse(e.responseText);0===this._headers.length&&(this._setHeaders(t.headers,t.rows),this._setHeadersHandlers()),this._setData(t.rows),n?this._totalRows&&parseInt(t.totalRows,10)!==parseInt(this._totalRows,10)?(this._totalRows=t.totalRows,this._pagination.setSize(Math.ceil(this._totalRows/this._options.pageSize))):this._totalRows=t.totalRows:this._totalRows&&t.rows.length!==parseInt(this._totalRows,10)?(this._totalRows=t.rows.length,this._pagination.setSize(Math.ceil(this._totalRows/this._options.pageSize))):this._totalRows=t.rows.length,this._setPagination()}},this)})}},l});
Ink.createModule("Ink.UI.Tabs","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,n,i,o,r){"use strict";var s=function(t,n){if(e.isDOMElement(t))this._element=t;else{if(t=o.select(t),0===t.length)throw new TypeError("1st argument must either be a DOM Element or a selector expression!");this._element=t[0]}this._options=Ink.extendObj({preventUrlChange:!1,active:void 0,disabled:[],onBeforeChange:void 0,onChange:void 0},i.data(t)),this._options=Ink.extendObj(this._options,n||{}),this._handlers={tabClicked:Ink.bindEvent(this._onTabClicked,this),disabledTabClicked:Ink.bindEvent(this._onDisabledTabClicked,this),resize:Ink.bindEvent(this._onResize,this)},this._init()};return s.prototype={_init:function(){this._menu=o.select(".tabs-nav",this._element)[0],this._menuTabs=this._getChildElements(this._menu),this._contentTabs=o.select(".tabs-content",this._element),this._initializeDom(),this._observe(),this._setFirstActive(),this._changeTab(this._activeMenuLink),this._handlers.resize(),e.registerInstance(this,this._element,"tabs")},_initializeDom:function(){for(var e=0;this._contentTabs.length>e;e++)n.hide(this._contentTabs[e])},_observe:function(){r.each(this._menuTabs,Ink.bind(function(e){var t=o.select("a",e)[0];r.inArray(t.getAttribute("href"),this._options.disabled)?this.disable(t):this.enable(t)},this)),t.observe(window,"resize",this._handlers.resize)},_setFirstActive:function(){var e=window.location.hash;this._activeContentTab=o.select(e,this._element)[0]||o.select(this._hashify(this._options.active),this._element)[0]||o.select(".tabs-content",this._element)[0],this._activeMenuLink=this._findLinkByHref(this._activeContentTab.getAttribute("id")),this._activeMenuTab=this._activeMenuLink.parentNode},_changeTab:function(e,t){t&&this._options.onBeforeChange!==void 0&&this._options.onBeforeChange(this);var i=e.getAttribute("href");n.removeClassName(this._activeMenuTab,"active"),n.removeClassName(this._activeContentTab,"active"),n.addClassName(this._activeContentTab,"hide-all"),this._activeMenuLink=e,this._activeMenuTab=this._activeMenuLink.parentNode,this._activeContentTab=o.select(i.substr(i.indexOf("#")),this._element)[0],n.addClassName(this._activeMenuTab,"active"),n.addClassName(this._activeContentTab,"active"),n.removeClassName(this._activeContentTab,"hide-all"),n.show(this._activeContentTab),t&&this._options.onChange!==void 0&&this._options.onChange(this)},_onTabClicked:function(e){t.stop(e);var n=t.findElement(e,"A");"a"===n.nodeName.toLowerCase()&&("true"!=""+this._options.preventUrlChange&&(window.location.hash=n.getAttribute("href").substr(n.getAttribute("href").indexOf("#"))),n!==this._activeMenuLink&&this.changeTab(n))},_onDisabledTabClicked:function(e){t.stop(e)},_onResize:function(){var t=e.currentLayout();t!==this._lastLayout&&(t===e.Layouts.SMALL||t===e.Layouts.MEDIUM?(n.removeClassName(this._menu,"menu"),n.removeClassName(this._menu,"horizontal")):(n.addClassName(this._menu,"menu"),n.addClassName(this._menu,"horizontal")),this._lastLayout=t)},_hashify:function(e){return e?0===e.indexOf("#")?e:"#"+e:""},_findLinkByHref:function(e){e=this._hashify(e);var t;return r.each(this._menuTabs,Ink.bind(function(n){var i=o.select("a",n)[0];-1!==i.getAttribute("href").indexOf("#")&&i.getAttribute("href").substr(i.getAttribute("href").indexOf("#"))===e&&(t=i)},this)),t},_getChildElements:function(e){for(var t=[],n=e.children,i=0;n.length>i;i++)1===n[i].nodeType&&t.push(n[i]);return t},changeTab:function(e){var t=1===e.nodeType?e:this._findLinkByHref(this._hashify(e));t&&!n.hasClassName(t,"ink-disabled")&&this._changeTab(t,!0)},disable:function(e){var i=1===e.nodeType?e:this._findLinkByHref(this._hashify(e));i&&(t.stopObserving(i,"click",this._handlers.tabClicked),t.observe(i,"click",this._handlers.disabledTabClicked),n.addClassName(i,"ink-disabled"))},enable:function(e){var i=1===e.nodeType?e:this._findLinkByHref(this._hashify(e));i&&(t.stopObserving(i,"click",this._handlers.disabledTabClicked),t.observe(i,"click",this._handlers.tabClicked),n.removeClassName(i,"ink-disabled"))},activeTab:function(){return this._activeContentTab.getAttribute("id")},activeMenuTab:function(){return this._activeMenuTab},activeMenuLink:function(){return this._activeMenuLink},activeContentTab:function(){return this._activeContentTab},destroy:e.destroyComponent},s});
Ink.createModule("Ink.UI.ImageQuery","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,n,i,o,r){"use strict";var s=function(t,n){if(!e.isDOMElement(t)&&"string"!=typeof t)throw"[ImageQuery] :: Invalid selector";if("string"==typeof t){if(this._element=o.select(t),1>this._element.length)throw"[ImageQuery] :: Selector has returned no elements";if(this._element.length>1){var r;for(r=1;this._element.length>r;r+=1)new Ink.UI.ImageQuery(this._element[r],n)}this._element=this._element[0]}else this._element=t;this._options=Ink.extendObj({queries:[],onLoad:null},i.data(this._element)),this._options=Ink.extendObj(this._options,n||{});var s;if(-1!==(s=this._element.src.lastIndexOf("?"))){var a=this._element.src.substr(s);this._filename=this._element.src.replace(a,"").split("/").pop()+a}else this._filename=this._element.src.split("/").pop();this._init()};return s.prototype={_init:function(){this._options.queries=r.sortMulti(this._options.queries,"width").reverse(),this._handlers={resize:Ink.bindEvent(this._onResize,this),load:Ink.bindEvent(this._onLoad,this)},"function"==typeof this._options.onLoad&&t.observe(this._element,"onload",this._handlers.load),t.observe(window,"resize",this._handlers.resize),this._handlers.resize.call(this)},_onResize:function(){clearTimeout(e);var e=setTimeout(Ink.bind(function(){if(!this._options.queries||this._options.queries==={})return clearTimeout(e),void 0;var t,n,i;for("number"==typeof window.innerWidth?i=window.innerWidth:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?i=document.documentElement.clientWidth:document.body&&(document.body.clientWidth||document.body.clientHeight)&&(i=document.body.clientWidth),t=0;this._options.queries.length>t;t+=1)if(i>=this._options.queries[t].width){n=t;break}n===void 0&&(n=this._options.queries.length-1);var o=this._options.queries[n].src||this._options.src;if("devicePixelRatio"in window&&window.devicePixelRatio>1&&"retina"in this._options&&(o=this._options.queries[n].retina||this._options.retina),this._options.queries[n].file=this._filename,"function"==typeof o&&(o=o.apply(this,[this._element,this._options.queries[n]]),"string"!=typeof o))throw'[ImageQuery] :: "src" callback does not return a string';var r;for(r in this._options.queries[n])"src"!==r&&"retina"!==r&&(o=o.replace("{:"+r+"}",this._options.queries[n][r]));this._element.src=o,delete this._options.queries[n].file,e=void 0},this),300)},_onLoad:function(){this._options.onLoad.call(this)}},s});
Ink.createModule("Ink.UI.TreeView","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1"],function(e,t,n,i,o,r){"use strict";var s=function(t,n){if(!e.isDOMElement(t)&&"string"!=typeof t)throw"[Ink.UI.TreeView] :: Invalid selector";if("string"==typeof t){if(this._element=o.select(t),1>this._element.length)throw"[Ink.UI.TreeView] :: Selector has returned no elements";this._element=this._element[0]}else this._element=t;this._options=Ink.extendObj({node:"li",child:"ul"},i.data(this._element)),this._options=Ink.extendObj(this._options,n||{}),this._init()};return s.prototype={_init:function(){this._handlers={click:Ink.bindEvent(this._onClick,this)},t.observe(this._element,"click",this._handlers.click);var e,i=o.select(this._options.node,this._element);r.each(i,Ink.bind(function(t){n.hasClassName(t,"open")||(n.hasClassName(t,"closed")||n.addClassName(t,"closed"),e=o.select(this._options.child,t),r.each(e,Ink.bind(function(e){n.hasClassName(e,"hide-all")||n.addClassName(e,"hide-all")},this)))},this))},_onClick:function(e){var i=t.element(e);if("."===this._options.node[0]){if(!n.hasClassName(i,this._options.node.substr(1)))for(;!n.hasClassName(i,this._options.node.substr(1))&&"body"!==i.nodeName.toLowerCase();)i=i.parentNode}else if("#"===this._options.node[0]){if(i.id!==this._options.node.substr(1))for(;i.id!==this._options.node.substr(1)&&"body"!==i.nodeName.toLowerCase();)i=i.parentNode}else if(i.nodeName.toLowerCase()!==this._options.node)for(;i.nodeName.toLowerCase()!==this._options.node&&"body"!==i.nodeName.toLowerCase();)i=i.parentNode;if("body"!==i.nodeName.toLowerCase()){var r=o.select(this._options.child,i);r.length>0&&(t.stop(e),r=r[0],n.hasClassName(r,"hide-all")?(n.removeClassName(r,"hide-all"),n.addClassName(i,"open"),n.removeClassName(i,"closed")):(n.addClassName(r,"hide-all"),n.removeClassName(i,"open"),n.addClassName(i,"closed")))}}},s});
Ink.createModule("Ink.UI.Gallery","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.Swipe_1"],function(e,t,n,i,o,s,r){"use strict";var a=function(e,t,n){var i=t[0],o=t[1];if(n||i>e[0]||o>e[1]){var s=i/o,r=e[0]/e[1],a=s>r?e[0]/i:e[1]/o;return[parseInt(i*a+.5,10),parseInt(o*a+.5,10)]}return t},l=function(e,t){t=Ink.bind(t,e);var n=[e.img.offsetWidth,e.img.offsetHeight];n[0]&&n[1]&&t(n),e.img.onload=Ink.bindEvent(function(){t([this.img.offsetWidth,this.img.offsetHeight])},e)},h=function(t,n){if(this._element=e.elOrSelector(t,"1st argument"),this._options=Ink.extendObj({fullImageMaxWidth:600,fullImageMaxHeight:400,thumbnailMaxWidth:106,layout:0,circular:!1,fixImageSizes:!1},i.data(this._element)),this._options=Ink.extendObj(this._options,n||{}),this._handlers={navClick:Ink.bindEvent(this._onNavClick,this),paginationClick:Ink.bindEvent(this._onPaginationClick,this),thumbsClick:Ink.bindEvent(this._onThumbsClick,this),focusBlur:Ink.bindEvent(this._onFocusBlur,this),keyDown:Ink.bindEvent(this._onKeyDown,this)},this._isFocused=!1,this._model=[],this._options.model instanceof Array)this._model=this._options.model,this._createdFrom="JSON";else{if("ul"!==this._element.nodeName.toLowerCase())throw new TypeError("You must pass a selector expression/DOM element as 1st option or provide a model on 2nd argument!");this._createdFrom="DOM"}if(this._index=0,this._thumbIndex=0,!isNaN(this._options.layout))if(this._options.layout=parseInt(this._options.layout,10),0===this._options.layout)this._showThumbs=!1,this._showDescription=!1,this._paginationHasPrevNext=!1;else{if(1!==this._options.layout&&2!==this._options.layout&&3!==this._options.layout)throw new TypeError("supported layouts are 0-3!");this._showThumbs=!0,this._showDescription=!0,this._paginationHasPrevNext=!0}null!==this._element.getAttribute("data-fix-image-sizes")&&(this._options.fixImageSizes=!0),this._init()};return h.prototype={_init:function(){"DOM"===this._createdFrom&&this._extractModelFromDOM();var n=this._generateMarkup(),i=this._element.parentNode;this._notFirstInit||(e.storeIdAndClasses(this._element,this),this._notFirstInit=!0),i.insertBefore(n,this._element),i.removeChild(this._element),this._element=n,e.restoreIdAndClasses(this._element,this),t.observe(this._paginationEl,"click",this._handlers.paginationClick),t.observe(this._navEl,"click",this._handlers.navClick),this._showThumbs&&t.observe(this._thumbsUlEl,"click",this._handlers.thumbsClick),t.observe(this._element,"mouseover",this._handlers.focusBlur),t.observe(this._element,"mouseout",this._handlers.focusBlur),t.observe(document,"keydown",this._handlers.keyDown),e.registerInstance(this,this._element,"gallery")},_extractModelFromDOM:function(){var e,t=[],n=o.select("> li",this._element);s.each(n,function(n){try{var i={image_full:"",image_thumb:"",title_text:"",title_link:"",description:"",content_overlay:document.createDocumentFragment()},s=o.select("> a[rel=enclosure]",n)[0],r=o.select("> img",s)[0],a=o.select("> a[class=bookmark]",n)[0],l=o.select("span[class=entry-title]",n)[0],h=o.select("> span[class=entry-content]",n)[0],d=o.select("> .content-overlay",n)[0];e=s.getAttribute("data-dims"),null!==e&&(e=e.split(","),e[0]=parseInt(e[0],10),e[1]=parseInt(e[1],10)),!e||isNaN(e[0])||isNaN(e[1])||(i.dims=e),i.image_full=s.getAttribute("href"),i.image_thumb=r.getAttribute("src"),a&&(i.title_link=a.getAttribute("href")),i.title_text=l.innerHTML,h&&(i.description=h.innerHTML),d&&i.content_overlay.appendChild(d),t.push(i)}catch(c){throw console.error("problematic element:"),console.error(n),console.error(c),Error("Problem parsing gallery data from DOM!")}}),this._model=t},_generateMarkup:function(){var e=document.createElement("div");e.className="ink-gallery";var t=document.createElement("div");t.className="stage";var i=document.createElement("nav");i.innerHTML=['<ul class="unstyled">','<li><a href="#" class="next"></a></li>','<li><a href="#" class="previous"></a></li>',"</ul>"].join(""),this._navEl=i;var o=document.createElement("div");o.className="slider";var h=document.createElement("ul");this._sliderUlEl=h;var d=this,c=this._options.fullImageMaxWidth,u=this._options.fullImageMaxHeight;s.each(this._model,function(e,t){var n=document.createElement("li"),i=document.createElement("img");if(i.setAttribute("name","image "+(t+1)),i.setAttribute("src",e.image_full),i.setAttribute("alt",e.title_text),n.appendChild(i),e.content_overlay)if(1===e.content_overlay.nodeType||11===e.content_overlay.nodeType)e.content_overlay=n.appendChild(e.content_overlay);else if("string"==typeof e.content_overlay){var o=document.createElement("div");o.className="content-overlay",o.innerHTML=e.content_overlay,e.content_overlay=n.appendChild(o)}if(h.appendChild(n),d._options.fixImageSizes){var s=function(e){var t=this.img,n=this.data;n.dims||(n.dims=e);var i=a([c,u],e),o=i[0],s=i[1],r=Math.floor((c-o)/2),l=Math.floor((u-s)/2);if(o!==c||s!==u){t.setAttribute("width",o),t.setAttribute("height",s);var h=t.style;r>0&&(h.paddingLeft=r+"px"),l>0&&(h.paddingBottom=l+"px")}};e.dims?s.call({img:i,data:e},e.dims):l({img:i,data:e},s)}}),o.appendChild(h),this._sliderEl=o;var m;if(this._showDescription){var p=this._model[this._index];m=document.createElement("div"),m.className=["article_text","example"+(3===this._options.layout?2:this._options.layout)].join(" "),m.innerHTML=p.title_link?['<h1><a href="',p.title_link,'">',p.title_text,"</a></h1>",p.description].join(""):["<h1>",p.title_text,"</h1>",p.description].join(""),this._articleTextDivEl=m}var f;this._showThumbs&&(f=document.createElement("div"),f.className="thumbs",h=document.createElement("ul"),h.className="unstyled",s.each(this._model,function(e,t){var n=document.createElement("li"),i=document.createElement("a");i.setAttribute("href","#");var o=document.createElement("img");o.setAttribute("name","thumb "+(t+1)),o.setAttribute("src",e.image_thumb),o.setAttribute("alt",t+1);var s=document.createElement("span");s.innerHTML=e.title_text,i.appendChild(o),i.appendChild(s),n.appendChild(i),h.appendChild(n)}),f.appendChild(h),this._thumbsDivEl=f,this._thumbsUlEl=h);var g=document.createElement("div");g.className="pagination";var _;return this._paginationHasPrevNext&&(_=document.createElement("a"),_.setAttribute("href","#"),_.className="previous",g.appendChild(_)),s.each(this._model,function(e,t){var n=document.createElement("a");n.setAttribute("href","#"),n.setAttribute("data-index",t),t===d._index&&(n.className="active"),g.appendChild(n)}),this._paginationHasPrevNext&&(_=document.createElement("a"),_.setAttribute("href","#"),_.className="next",g.appendChild(_)),this._paginationEl=g,0===this._options.layout?(t.appendChild(i),t.appendChild(o),t.appendChild(g),e.appendChild(t)):(1===this._options.layout||2===this._options.layout||3===this._options.layout)&&(t.appendChild(i),t.appendChild(o),t.appendChild(m),e.appendChild(t),3===this._options.layout?(this._thumbsUlEl.className="thumbs unstyled",n.addClassName(e,"rightNav"),e.appendChild(this._thumbsUlEl)):(f.appendChild(g),e.appendChild(f))),this._swipeDir="x",this._swipeThumbsDir=0===this._options.layout?"":3===this._options.layout?"y":"x",r._supported&&new r(e,{callback:Ink.bind(function(t,n){var i=this._isMeOrParent(n.target,this._thumbsUlEl),o=i?!1:this._isMeOrParent(n.target,e);!i&&!o||i&&!this._swipeThumbsDir||o&&n.axis!==this._swipeDir||i&&n.axis!==this._swipeThumbsDir||(0>n.dr[0]?i?this.thumbNext():this.next():i?this.thumbPrevious():this.previous())},this),maxDuration:.4,minDist:50}),e},_isMeOrParent:function(e,t){if(e){do{if(e===t)return!0;e=e.parentNode}while(e);return!1}},_onNavClick:function(e){var i,o=t.element(e);if(n.hasClassName(o,"previous"))i=-1;else{if(!n.hasClassName(o,"next"))return;i=1}t.stop(e),this.goTo(i,!0)},_onPaginationClick:function(e){var i=t.element(e),o=i.getAttribute("data-index"),s=!1;if(n.hasClassName(i,"previous"))o=-1,s=!0;else if(n.hasClassName(i,"next"))o=1,s=!0;else{if(null===o)return;o=parseInt(o,10)}t.stop(e),s?this.thumbGoTo(o,!0):this.goTo(o)},_onThumbsClick:function(e){var n=t.element(e);if("img"===n.nodeName.toLowerCase());else{if("span"!==n.nodeName.toLowerCase())return;n=o.select("> img",n.parentNode)[0]}t.stop(e);var i=parseInt(n.getAttribute("alt"),10)-1;this.goTo(i)},_onFocusBlur:function(e){this._isFocused="mouseover"===e.type},_onKeyDown:function(e){if(this._isFocused){var n=e.keyCode;if(37===n)this.previous();else{if(39!==n)return;this.next()}t.stop(e)}},_validateValue:function(t,n,i){if(!e.isInteger(t))throw new TypeError("1st parameter must be an integer number!");if(void 0!==n&&n!==!1&&n!==!0)throw new TypeError("2nd parameter must either be boolean or ommitted!");var o=i?this._thumbIndex:this._index;if(n&&(t+=o),this._options.circular)0>t?t=this._model.length-1:t>=this._model.length&&(t=0);else if(0>t||t>=this._model.length||t===o)return!1;return t},getIndex:function(){return this._index},getLength:function(){return this._model.length},goTo:function(e,t){if(e=this._validateValue(e,t,!1),e!==!1){this._index=e;var i=o.select("> a",this._paginationEl),r=this;if(s.each(i,function(e,t){n.setClassName(e,"active",t-(r._paginationHasPrevNext?1:0)===r._index)}),this._sliderUlEl.style.marginLeft=["-",this._options.fullImageMaxWidth*this._index,"px"].join(""),this._showDescription){var a=this._model[this._index];this._articleTextDivEl.innerHTML=a.title_link?['<h1><a href="',a.title_link,'">',a.title_text,"</a></h1>",a.description].join(""):["<h1>",a.title_text,"</h1>",a.description].join("")}}},thumbGoTo:function(e,t){if(e=this._validateValue(e,t,!0),e!==!1){this._thumbIndex=e;var n="margin"+("x"===this._swipeThumbsDir?"Left":"Top");this._thumbsUlEl.style[n]=["-",this._options.thumbnailMaxWidth*this._thumbIndex,"px"].join("")}},previous:function(){this.goTo(-1,!0)},next:function(){this.goTo(1,!0)},thumbPrevious:function(){this.thumbGoTo(-1,!0)},thumbNext:function(){this.thumbGoTo(1,!0)},destroy:e.destroyComponent},h});
Ink.createModule("Ink.UI.FormValidator","1",["Ink.Dom.Css_1","Ink.Util.Validator_1"],function(e,t){"use strict";var n={version:"1",_flagMap:{"ink-fv-required":{msg:"Required field"},"ink-fv-email":{msg:"Invalid e-mail address"},"ink-fv-url":{msg:"Invalid URL"},"ink-fv-number":{msg:"Invalid number"},"ink-fv-phone_pt":{msg:"Invalid phone number"},"ink-fv-phone_cv":{msg:"Invalid phone number"},"ink-fv-phone_mz":{msg:"Invalid phone number"},"ink-fv-phone_ao":{msg:"Invalid phone number"},"ink-fv-date":{msg:"Invalid date"},"ink-fv-confirm":{msg:"Confirmation does not match"},"ink-fv-custom":{msg:""}},elements:{},confirmElms:{},hasConfirm:{},_errorClassName:"tip",_errorValidationClassName:"validaton",_errorTypeWarningClassName:"warning",_errorTypeErrorClassName:"error",validate:function(e,t){if(this._free(),t=Ink.extendObj({onSuccess:!1,onError:!1,customFlag:!1,confirmGroup:[]},t||{}),"string"==typeof e&&(e=document.getElementById(e)),null===e)return!1;this.element=e,(this.element.id===void 0||null===this.element.id||""===this.element.id)&&(this.element.id="ink-fv_randomid_"+Math.round(99999*Math.random())),this.custom=t.customFlag,this.confirmGroup=t.confirmGroup;var n=this._validateElements();return n.length>0?(t.onError?t.onError(n):this._showError(e,n),!1):(t.onError||this._clearError(e),this._clearCache(),t.onSuccess&&t.onSuccess(),!0)},reset:function(){this._clearError(),this._clearCache()},_free:function(){this.element=null,this.custom=!1,this.confirmGroup=!1},_clearCache:function(){this.element=null,this.elements=[],this.custom=!1,this.confirmGroup=!1},_getElements:function(){this.elements[this.element.id]=[],this.confirmElms[this.element.id]=[];for(var t=this.element.elements,n=!1,i=0,o=t.length;o>i;i++)if(n=t[i],null!==n.getAttribute("type")&&"radio"===n.getAttribute("type").toLowerCase()){if(0===this.elements[this.element.id].length||n.getAttribute("type")!==this.elements[this.element.id][this.elements[this.element.id].length-1].getAttribute("type")&&n.getAttribute("name")!==this.elements[this.element.id][this.elements[this.element.id].length-1].getAttribute("name"))for(var r in this._flagMap)if(e.hasClassName(n,r)){this.elements[this.element.id].push(n);break}}else{for(var s in this._flagMap)if(e.hasClassName(n,s)&&"ink-fv-confirm"!==s){this.elements[this.element.id].push(n);break}e.hasClassName(n,"ink-fv-confirm")&&(this.confirmElms[this.element.id].push(n),this.hasConfirm[this.element.id]=!0)}},_validateElements:function(){var t;this._getElements(),this.hasConfirm[this.element.id]!==void 0&&this.hasConfirm[this.element.id]===!0&&(t=this._makeConfirmGroups());for(var n,i=[],o=!1,r=!1,s=0,a=this.elements[this.element.id].length;a>s;s++)if(n=!1,o=this.elements[this.element.id][s],!o.disabled)for(var l in this._flagMap)e.hasClassName(o,l)&&("ink-fv-custom"!==l&&"ink-fv-confirm"!==l?this._isValid(o,l)||(n?i[i.length-1].errors.push(l):(i.push({elm:o,errors:[l]}),n=!0)):"ink-fv-confirm"!==l&&(r=this._isCustomValid(o),r.length>0&&i.push({elm:o,errors:[l],custom:r})));return i=this._validateConfirmGroups(t,i)},_validateConfirmGroups:function(e,t){var n=!1;for(var i in e)n=e[i],2===n.length&&n[0].value!==n[1].value&&t.push({elm:n[1],errors:["ink-fv-confirm"]});return t},_makeConfirmGroups:function(){var t;if(this.confirmGroup&&this.confirmGroup.length>0){t={};for(var n=!1,i=!1,o=0,r=this.confirmElms[this.element.id].length;r>o;o++){n=this.confirmElms[this.element.id][o];for(var s=0,a=this.confirmGroup.length;a>s;s++)i=this.confirmGroup[s],e.hasClassName(n,i)&&(t[i]===void 0?t[i]=[n]:t[i].push(n))}return t}return 2===this.confirmElms[this.element.id].length&&(t={"ink-fv-confirm":[this.confirmElms[this.element.id][0],this.confirmElms[this.element.id][1]]}),t},_isCustomValid:function(t){for(var n=[],i=!1,o=0,r=this.custom.length;r>o;o++)i=this.custom[o],e.hasClassName(t,i.flag)&&(i.callback(t,i.msg)||n.push({flag:i.flag,msg:i.msg}));return n},_isValid:function(n,i){switch(i){case"ink-fv-required":if("select"===n.nodeName.toLowerCase())return n.selectedIndex>0?!0:!1;if("checkbox"!==n.getAttribute("type")&&"radio"!==n.getAttribute("type")){if(""!==this._trim(n.value))return!0}else if("checkbox"===n.getAttribute("type")){if(n.checked===!0)return!0}else if("radio"===n.getAttribute("type")){var o=n.form[n.name];o.length===void 0&&(o=[o]);for(var r=!1,s=0,a=o.length;a>s;s++)o[s].checked===!0&&(r=!0);return r}break;case"ink-fv-email":if(""===this._trim(n.value))return e.hasClassName(n,"ink-fv-required")?!1:!0;if(t.mail(n.value))return!0;break;case"ink-fv-url":if(""===this._trim(n.value))return e.hasClassName(n,"ink-fv-required")?!1:!0;if(t.url(n.value))return!0;break;case"ink-fv-number":if(""===this._trim(n.value))return e.hasClassName(n,"ink-fv-required")?!1:!0;if(!isNaN(Number(n.value)))return!0;break;case"ink-fv-phone_pt":if(""===this._trim(n.value))return e.hasClassName(n,"ink-fv-required")?!1:!0;if(t.isPTPhone(n.value))return!0;break;case"ink-fv-phone_cv":if(""===this._trim(n.value))return e.hasClassName(n,"ink-fv-required")?!1:!0;if(t.isCVPhone(n.value))return!0;break;case"ink-fv-phone_ao":if(""===this._trim(n.value))return e.hasClassName(n,"ink-fv-required")?!1:!0;if(t.isAOPhone(n.value))return!0;break;case"ink-fv-phone_mz":if(""===this._trim(n.value))return e.hasClassName(n,"ink-fv-required")?!1:!0;if(t.isMZPhone(n.value))return!0;break;case"ink-fv-date":if(""===this._trim(n.value))return e.hasClassName(n,"ink-fv-required")?!1:!0;var l=Ink.getModule("Ink.Dom.Element",1),h=l.data(n),d="yyyy-mm-dd";if(e.hasClassName(n,"ink-datepicker")&&"format"in h?d=h.format:"validFormat"in h&&(d=h.validFormat),!(d in t._dateParsers)){var c=[];for(var u in t._dateParsers)c.push(u);throw"The attribute data-valid-format must be one of the following values: "+c.join(",")}return t.isDate(d,n.value);case"ink-fv-custom":}return!1},_showError:function(t,n){this._clearError(t);for(var i=!1,o=0,r=n.length;r>o;o++)if(i=n[o].elm,"radio"!==i.getAttribute("type")){var s=document.createElement("p");e.addClassName(s,this._errorClassName),e.addClassName(s,this._errorTypeErrorClassName),s.innerHTML="ink-fv-custom"!==n[o].errors[0]?this._flagMap[n[o].errors[0]].msg:n[o].custom[0].msg,"checkbox"!==i.getAttribute("type")&&(i.nextSibling.parentNode.insertBefore(s,i.nextSibling),e.hasClassName(i.parentNode,"control")&&(e.addClassName(i.parentNode.parentNode,"validation"),"ink-fv-required"===n[o].errors[0]?e.addClassName(i.parentNode.parentNode,"error"):e.addClassName(i.parentNode.parentNode,"warning")))}else e.hasClassName(i.parentNode.parentNode,"control-group")&&(e.addClassName(i.parentNode.parentNode,"validation"),e.addClassName(i.parentNode.parentNode,"error"))},_clearError:function(t){for(var n=t.getElementsByTagName("p"),i=!1,o=n.length-1;o>=0;o--)i=n[o],e.hasClassName(i,this._errorClassName)&&(e.hasClassName(i.parentNode,"control")&&(e.removeClassName(i.parentNode.parentNode,"validation"),e.removeClassName(i.parentNode.parentNode,"error"),e.removeClassName(i.parentNode.parentNode,"warning")),e.hasClassName(i,"tip")&&e.hasClassName(i,"error")&&i.parentNode.removeChild(i));var r=t.getElementsByTagName("ul");for(o=r.length-1;o>=0;o--)i=r[o],e.hasClassName(i,"control-group")&&(e.removeClassName(i,"validation"),e.removeClassName(i,"error"))},_trim:function(e){return"string"==typeof e?e.replace(/^\s+|\s+$|\n+$/g,""):void 0}};return n});
Ink.createModule("Ink.UI.Droppable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1"],function(e,t,n){var i={debug:!1,_elements:{},add:function(e,t){var n=Ink.extendObj({hoverclass:!1,accept:!1,onHover:!1,onDrop:!1,onDropOut:!1},t||{});e=Ink.i(e),n.accept&&n.accept.constructor===Array&&(n.accept=n.accept.join()),this._elements[e.id]={options:n},this.update(e.id)},updateAll:function(){for(var e in this._elements)this._elements.hasOwnProperty(e)&&this.update(Ink.i(e))},update:function(t){t=Ink.i(t);var n=this._elements[t.id];n&&(n.left=e.offsetLeft(t),n.top=e.offsetTop(t),n.right=n.left+e.elementWidth(t),n.bottom=n.top+e.elementHeight(t))},remove:function(e){e=Ink.i(e),delete this._elements[e.id]},action:function(e,t,i,o){var r,s,a,l,h;for(var d in this._elements)if(this._elements.hasOwnProperty(d))if(l=this._elements[d],r=l.options,a=!1,h=Ink.i(d),e.x>=l.left&&e.x<=l.right&&e.y>=l.top&&e.y<=l.bottom){if(r.accept){s=o.className.split(" ");for(var c=0,u=s.length;u>c;c++)r.accept.search(s[c])>=0&&o!==h&&(a=!0)}else a=!0;a&&("drag"===t?(r.hoverclass&&n.addClassName(h,r.hoverclass),r.onHover&&r.onHover(o,h)):"drop"===t&&r.onDrop&&(r.hoverclass&&n.removeClassName(h,r.hoverclass),r.onDrop&&r.onDrop(o,h,i)))}else"drag"===t&&r.hoverclass&&n.removeClassName(h,r.hoverclass),"drop"===t&&r.onDropOut&&r.onDropOut(o,h,i)}};return i});
Ink.createModule("Ink.UI.Draggable","1",["Ink.Dom.Element_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Browser_1","Ink.UI.Droppable_1"],function(e,t,n,i,o){var s=function(e,t){this.init(e,t)};return s.prototype={init:function(n,o){var s=Ink.extendObj({constraint:!1,top:0,right:e.pageWidth(),bottom:e.pageHeight(),left:0,handler:!1,revert:!1,cursor:"move",zindex:9999,onStart:!1,onEnd:!1,onDrag:!1,onChange:!1,droppableProxy:!1,mouseAnchor:void 0,skipChildren:!0,debug:!1},o||{});this.options=s,this.element=Ink.i(n),this.handle=!1,this.elmStartPosition=!1,this.active=!1,this.dragged=!1,this.prevCoords=!1,this.placeholder=!1,this.position=!1,this.zindex=!1,this.firstDrag=!0,s.fps&&(this.deltaMs=1e3/s.fps,this.lastRanAt=0),this.handlers={},this.handlers.start=Ink.bindEvent(this._onStart,this),this.handlers.dragFacade=Ink.bindEvent(this._onDragFacade,this),this.handlers.drag=Ink.bindEvent(this._onDrag,this),this.handlers.end=Ink.bindEvent(this._onEnd,this),this.handlers.selectStart=function(e){return t.stop(e),!1},this.handle=this.options.handler?Ink.i(this.options.handler):this.element,this.handle.style.cursor=s.cursor,s.right!==!1&&(this.options.right=s.right-e.elementWidth(n)),s.bottom!==!1&&(this.options.bottom=s.bottom-e.elementHeight(n)),t.observe(this.handle,"touchstart",this.handlers.start),t.observe(this.handle,"mousedown",this.handlers.start),i.IE&&t.observe(this.element,"selectstart",this.handlers.selectStart)},destroy:function(){t.stopObserving(this.handle,"touchstart",this.handlers.start),t.stopObserving(this.handle,"mousedown",this.handlers.start),i.IE&&t.stopObserving(this.element,"selectstart",this.handlers.selectStart)},_getPageScroll:function(){return self.pageXOffset!==void 0?[self.pageXOffset,self.pageYOffset]:document.documentElement!==void 0&&document.documentElement.scrollLeft!==void 0?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[document.body.scrollLeft,document.body.scrollTop]},_getCoords:function(e){var t=this._getPageScroll();return{x:(e.touches?e.touches[0].clientX:e.clientX)+t[0],y:(e.touches?e.touches[0].clientY:e.clientY)+t[1]}},_cloneStyle:function(t,i){i.className=t.className,i.style.borderWidth="0",i.style.padding="0",i.style.position="absolute",i.style.width=e.elementWidth(t)+"px",i.style.height=e.elementHeight(t)+"px",i.style.left=e.elementLeft(t)+"px",i.style.top=e.elementTop(t)+"px",i.style.cssFloat=n.getStyle(t,"float"),i.style.display=n.getStyle(t,"display")},_onStart:function(i){if(!this.active&&t.isLeftClick(i)||i.button===void 0){var o=i.target||i.srcElement;if(this.options.skipChildren&&o!==this.element)return;t.stop(i),this.elmStartPosition=[e.elementLeft(this.element),e.elementTop(this.element)];var s=[parseInt(n.getStyle(this.element,"left"),10),parseInt(n.getStyle(this.element,"top"),10)],r=[e.elementWidth(this.element),e.elementHeight(this.element)];this.originalPosition=[s[0]?s[0]:null,s[1]?s[1]:null],this.delta=this._getCoords(i),this.active=!0,this.position=n.getStyle(this.element,"position"),this.zindex=n.getStyle(this.element,"zIndex");var a=document.createElement("div");if(a.style.position=this.position,a.style.width=r[0]+"px",a.style.height=r[1]+"px",a.style.marginTop=n.getStyle(this.element,"margin-top"),a.style.marginBottom=n.getStyle(this.element,"margin-bottom"),a.style.marginLeft=n.getStyle(this.element,"margin-left"),a.style.marginRight=n.getStyle(this.element,"margin-right"),a.style.borderWidth="0",a.style.padding="0",a.style.cssFloat=n.getStyle(this.element,"float"),a.style.display=n.getStyle(this.element,"display"),a.style.visibility="hidden",this.delta2=[this.delta.x-this.elmStartPosition[0],this.delta.y-this.elmStartPosition[1]],this.options.mouseAnchor){var l=this.options.mouseAnchor.split(" "),h=[r[0],r[1]];"left"===l[0]?h[0]=0:"center"===l[0]&&(h[0]=parseInt(h[0]/2,10)),"top"===l[1]?h[1]=0:"center"===l[1]&&(h[1]=parseInt(h[1]/2,10)),this.applyDelta=[this.delta2[0]-h[0],this.delta2[1]-h[1]]}if(this.placeholder=a,this.options.onStart&&this.options.onStart(this.element,i),this.options.droppableProxy){this.proxy=document.createElement("div"),r=[window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight];var d=this.proxy.style;d.width=r[0]+"px",d.height=r[1]+"px",d.position="fixed",d.left="0",d.top="0",d.zIndex=this.options.zindex+1,d.backgroundColor="#FF0000",n.setOpacity(this.proxy,0);for(var c=document.body.firstChild;c&&1!==c.nodeType;)c=c.nextSibling;document.body.insertBefore(this.proxy,c),t.observe(this.proxy,"mousemove",this.handlers[this.options.fps?"dragFacade":"drag"]),t.observe(this.proxy,"touchmove",this.handlers[this.options.fps?"dragFacade":"drag"])}else t.observe(document,"mousemove",this.handlers[this.options.fps?"dragFacade":"drag"]);return this.element.style.position="absolute",this.element.style.zIndex=this.options.zindex,this.element.parentNode.insertBefore(this.placeholder,this.element),this._onDrag(i),t.observe(document,"mouseup",this.handlers.end),t.observe(document,"touchend",this.handlers.end),!1}},_onDragFacade:function(e){var t=(new Date).getTime();(!this.lastRanAt||t>this.lastRanAt+this.deltaMs)&&(this.lastRanAt=t,this._onDrag(e))},_onDrag:function(e){if(this.active){t.stop(e),this.dragged=!0;var n=this._getCoords(e),i=n.x,s=n.y,r=this.options,a=!1,l=!1;if(this.prevCoords||(this.prevCoords={x:0,y:0}),i!==this.prevCoords.x||s!==this.prevCoords.y){if(r.onDrag&&r.onDrag(this.element,e),this.prevCoords=n,a=this.elmStartPosition[0]+i-this.delta.x,l=this.elmStartPosition[1]+s-this.delta.y,("horizontal"===r.constraint||"both"===r.constraint)&&(r.right!==!1&&a>r.right&&(a=r.right),r.left!==!1&&r.left>a&&(a=r.left)),("vertical"===r.constraint||"both"===r.constraint)&&(r.bottom!==!1&&l>r.bottom&&(l=r.bottom),r.top!==!1&&r.top>l&&(l=r.top)),this.firstDrag&&(o&&o.updateAll(),this.firstDrag=!1),a&&(this.element.style.left=a+"px"),l&&(this.element.style.top=l+"px"),o){var h=this.options.mouseAnchor?{x:i-this.applyDelta[0],y:s-this.applyDelta[1]}:n;o.action(h,"drag",e,this.element)}r.onChange&&r.onChange(this)}}},_onEnd:function(e){t.stopObserving(document,"mousemove",this.handlers.drag),t.stopObserving(document,"touchmove",this.handlers.drag),this.options.fps&&this._onDrag(e),this.active&&this.dragged&&(this.options.droppableProxy&&document.body.removeChild(this.proxy),this.pt&&(this.pt.parentNode.removeChild(this.pt),this.pt=void 0),this.placeholder&&this.placeholder.parentNode.removeChild(this.placeholder),this.options.revert&&(this.element.style.position=this.position,this.element.style.zIndex=null!==this.zindex?this.zindex:"auto",this.element.style.left=this.originalPosition[0]?this.originalPosition[0]+"px":"",this.element.style.top=this.originalPosition[1]?this.originalPosition[1]+"px":""),this.options.onEnd&&this.options.onEnd(this.element,e),o&&o.action(this._getCoords(e),"drop",e,this.element),this.position=!1,this.zindex=!1,this.firstDrag=!0),this.active=!1,this.dragged=!1}},s});
Ink.createModule("Ink.UI.DatePicker","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1","Ink.Util.Array_1","Ink.Util.Date_1"],function(e,t,i,n,o,s,r){"use strict";var a=function(t,i){t&&(this._dataField=e.elOrSelector(t,"1st argument")),this._options=Ink.extendObj({instance:"scdp_"+Math.round(99999*Math.random()),format:"yyyy-mm-dd",cssClass:"sapo_component_datepicker",position:"right",onFocus:!0,onYearSelected:void 0,onMonthSelected:void 0,validDayFn:void 0,startDate:!1,onSetDate:!1,displayInSelect:!1,showClose:!0,showClean:!0,yearRange:!1,dateRange:!1,startWeekDay:1,closeText:"Close",cleanText:"Clear",prevLinkText:"«",nextLinkText:"»",ofText:"&nbsp;de&nbsp;",month:{1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},wDay:{0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"}},n.data(this._dataField)||{}),this._options=Ink.extendObj(this._options,i||{}),this._options.format=this._dateParsers[this._options.format]||this._options.format,this._hoverPicker=!1,this._picker=null,this._options.pickerField&&(this._picker=e.elOrSelector(this._options.pickerField,"pickerField")),this._today=new Date,this._day=this._today.getDate(),this._month=this._today.getMonth(),this._year=this._today.getFullYear(),this._setMinMax(this._options.dateRange||this._options.yearRange),this._data=new Date(Date.UTC.apply(this,this._checkDateRange(this._year,this._month,this._day))),this._options.startDate&&"string"==typeof this._options.startDate&&/\d\d\d\d\-\d\d\-\d\d/.test(this._options.startDate)&&this.setDate(this._options.startDate),this._init(),this._render(),this._options.startDate||this._dataField&&"string"==typeof this._dataField.value&&this._dataField.value&&this.setDate(this._dataField.value),e.registerInstance(this,this._containerObject,"datePicker")};return a.prototype={version:"0.1",_init:function(){Ink.extendObj(this._options,this._lang||{})},_render:function(){this._containerObject=document.createElement("div"),this._containerObject.id=this._options.instance,this._containerObject.className="sapo_component_datepicker";var i=document.getElementsByTagName("body")[0];if(this._options.showClose||this._options.showClean){if(this._superTopBar=document.createElement("div"),this._superTopBar.className="sapo_cal_top_options",this._options.showClean){var o=document.createElement("a");o.className="clean",o.innerHTML=this._options.cleanText,this._superTopBar.appendChild(o)}if(this._options.showClose){var s=document.createElement("a");s.className="close",s.innerHTML=this._options.closeText,this._superTopBar.appendChild(s)}this._containerObject.appendChild(this._superTopBar)}var r=document.createElement("div");r.className="sapo_cal_top",this._monthDescContainer=document.createElement("div"),this._monthDescContainer.className="sapo_cal_month_desc",this._monthPrev=document.createElement("div"),this._monthPrev.className="sapo_cal_prev",this._monthPrev.innerHTML='<a href="#prev" class="change_month_prev">'+this._options.prevLinkText+"</a>",this._monthNext=document.createElement("div"),this._monthNext.className="sapo_cal_next",this._monthNext.innerHTML='<a href="#next" class="change_month_next">'+this._options.nextLinkText+"</a>",r.appendChild(this._monthPrev),r.appendChild(this._monthDescContainer),r.appendChild(this._monthNext),this._monthContainer=document.createElement("div"),this._monthContainer.className="sapo_cal_month",this._containerObject.appendChild(r),this._containerObject.appendChild(this._monthContainer),this._monthSelector=document.createElement("ul"),this._monthSelector.className="sapo_cal_month_selector";for(var a,l,h=1;12>=h;h++)0===(h-1)%4&&(a=document.createElement("ul")),l=document.createElement("li"),l.innerHTML='<a href="#" class="sapo_calmonth_'+(2===(h+"").length?h:"0"+h)+'">'+this._options.month[h].substring(0,3)+"</a>",a.appendChild(l),0===h%4&&this._monthSelector.appendChild(a);if(this._containerObject.appendChild(this._monthSelector),this._yearSelector=document.createElement("ul"),this._yearSelector.className="sapo_cal_year_selector",this._containerObject.appendChild(this._yearSelector),(!this._options.onFocus||this._options.displayInSelect)&&(this._options.pickerField?this._picker=e.elOrSelector(this._options.pickerField,"pickerField"):(this._picker=document.createElement("a"),this._picker.href="#open_cal",this._picker.innerHTML="open",this._picker.style.position="absolute",this._picker.style.top=n.elementTop(this._dataField),this._picker.style.left=n.elementLeft(this._dataField)+(n.elementWidth(this._dataField)||0)+5+"px",this._dataField.parentNode.appendChild(this._picker),this._picker.className="sapo_cal_date_picker")),this._options.displayInSelect){if(!(this._options.dayField&&this._options.monthField&&this._options.yearField||this._options.pickerField))throw"To use display in select you *MUST* to set dayField, monthField, yearField and pickerField!";this._options.dayField=e.elOrSelector(this._options.dayField,"dayField"),this._options.monthField=e.elOrSelector(this._options.monthField,"monthField"),this._options.yearField=e.elOrSelector(this._options.yearField,"yearField")}i.insertBefore(this._containerObject,i.childNodes[0]),this._picker?t.observe(this._picker,"click",Ink.bindEvent(function(e){t.stop(e),this._containerObject=n.clonePosition(this._containerObject,this._picker),this._updateDate(),this._showMonth(),this._containerObject.style.display="block"},this)):t.observe(this._dataField,"focus",Ink.bindEvent(function(){this._containerObject=n.clonePosition(this._containerObject,this._dataField),"bottom"===this._options.position?(this._containerObject.style.top=n.elementHeight(this._dataField)+n.offsetTop(this._dataField)+"px",this._containerObject.style.left=n.offset2(this._dataField)[0]+"px"):(this._containerObject.style.top=n.offset2(this._dataField)[1]+"px",this._containerObject.style.left=n.elementWidth(this._dataField)+n.offset2(this._dataField)[0]+"px"),this._updateDate(),this._showMonth(),this._containerObject.style.display="block"},this)),this._options.displayInSelect?(t.observe(this._options.dayField,"change",Ink.bindEvent(function(){var e=this._options.yearField[this._options.yearField.selectedIndex].value;""!==e&&0!==e&&(this._updateDate(),this._showDefaultView())},this)),t.observe(this._options.monthField,"change",Ink.bindEvent(function(){var e=this._options.yearField[this._options.yearField.selectedIndex].value;""!==e&&0!==e&&(this._updateDate(),this._showDefaultView())},this)),t.observe(this._options.yearField,"change",Ink.bindEvent(function(){this._updateDate(),this._showDefaultView()},this))):(t.observe(this._dataField,"change",Ink.bindEvent(function(){this._updateDate(),this._showDefaultView(),this.setDate(),this._hoverPicker||(this._containerObject.style.display="none")},this)),t.observe(this._dataField,"blur",Ink.bindEvent(function(){this._hoverPicker||(this._containerObject.style.display="none")},this))),t.observe(document,"click",Ink.bindEvent(function(e){void 0===e.target&&(e.target=e.srcElement),n.descendantOf(this._containerObject,e.target)||e.target===this._dataField||(this._picker?e.target===this._picker||this._options.displayInSelect&&(e.target===this._options.dayField||e.target===this._options.monthField||e.target===this._options.yearField)||this._options.dayField&&(n.descendantOf(this._options.dayField,e.target)||n.descendantOf(this._options.monthField,e.target)||n.descendantOf(this._options.yearField,e.target))||(this._containerObject.style.display="none"):this._containerObject.style.display="none")},this)),this._showMonth(),this._monthChanger=document.createElement("a"),this._monthChanger.href="#monthchanger",this._monthChanger.className="sapo_cal_link_month",this._monthChanger.innerHTML=this._options.month[this._month+1],this._deText=document.createElement("span"),this._deText.innerHTML=this._options._deText,this._yearChanger=document.createElement("a"),this._yearChanger.href="#yearchanger",this._yearChanger.className="sapo_cal_link_year",this._yearChanger.innerHTML=this._year,this._monthDescContainer.innerHTML="",this._monthDescContainer.appendChild(this._monthChanger),this._monthDescContainer.appendChild(this._deText),this._monthDescContainer.appendChild(this._yearChanger),t.observe(this._containerObject,"mouseover",Ink.bindEvent(function(e){t.stop(e),this._hoverPicker=!0},this)),t.observe(this._containerObject,"mouseout",Ink.bindEvent(function(e){t.stop(e),this._hoverPicker=!1},this)),t.observe(this._containerObject,"click",Ink.bindEvent(function(e){e.target===void 0&&(e.target=e.srcElement);var i=e.target.className,n=-1!==i.indexOf("sapo_cal_off");if(t.stop(e),0!==i.indexOf("sapo_cal_")||n)if(0!==i.indexOf("sapo_calmonth_")||n)if(0!==i.indexOf("sapo_calyear_")||n)0!==i.indexOf("change_month_")||n?0!==i.indexOf("change_year_")||n?"clean"===i?this._options.displayInSelect?(this._options.yearField.selectedIndex=0,this._options.monthField.selectedIndex=0,this._options.dayField.selectedIndex=0):this._dataField.value="":"close"===i&&(this._containerObject.style.display="none"):"change_year_next"===i?this._showYearSelector(1):"change_year_prev"===i&&this._showYearSelector(-1):"change_month_next"===i?this._updateCal(1):"change_month_prev"===i&&this._updateCal(-1);else{var o=i.substr(13,4);Number(o)&&(this._year=o,"function"==typeof this._options.onYearSelected&&this._options.onYearSelected(this,{year:this._year}),this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._yearSelector.style.display="none",this._setActiveMonth(),this._monthSelector.style.display="block")}else{var s=i.substr(14,2);Number(s)&&(this._month=s-1,this._monthSelector.style.display="none",this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",this._year<this._yearMin||this._year===this._yearMin&&this._month<=this._monthMin?this._monthPrev.childNodes[0].className="action_inactive":(this._year>this._yearMax||this._year===this._yearMax&&this._month>=this._monthMax)&&(this._monthNext.childNodes[0].className="action_inactive"),this._updateCal(),this._monthContainer.style.display="block")}else{var r=i.substr(9,2);Number(r)?(this.setDate(this._year+"-"+(this._month+1)+"-"+r),this._containerObject.style.display="none"):"sapo_cal_link_month"===i?(this._monthContainer.style.display="none",this._yearSelector.style.display="none",this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._setActiveMonth(),this._monthSelector.style.display="block"):"sapo_cal_link_year"===i&&(this._monthPrev.childNodes[0].className="action_inactive",this._monthNext.childNodes[0].className="action_inactive",this._monthSelector.style.display="none",this._monthContainer.style.display="none",this._showYearSelector(),this._yearSelector.style.display="block")}this._updateDescription()},this))},_setMinMax:function(e){var t;if(e){var i=e.split(":"),n=/^(\d{4})((\-)(\d{1,2})((\-)(\d{1,2}))?)?$/;if(i[0]&&("NOW"===i[0]?(this._yearMin=this._today.getFullYear(),this._monthMin=this._today.getMonth()+1,this._dayMin=this._today.getDate()):n.test(i[0])?(t=i[0].split("-"),this._yearMin=Math.floor(t[0]),this._monthMin=Math.floor(t[1])||1,this._dayMin=Math.floor(t[2])||1,this._monthMin>1&&this._monthMin>12&&(this._monthMin=1,this._dayMin=1),this._dayMin>1&&this._dayMin>this._daysInMonth(this._yearMin,this._monthMin)&&(this._dayMin=1)):(this._yearMin=Number.MIN_VALUE,this._monthMin=1,this._dayMin=1)),i[1])if("NOW"===i[1])this._yearMax=this._today.getFullYear(),this._monthMax=this._today.getMonth()+1,this._dayMax=this._today.getDate();else if(n.test(i[1])){t=i[1].split("-"),this._yearMax=Math.floor(t[0]),this._monthMax=Math.floor(t[1])||12,this._dayMax=Math.floor(t[2])||this._daysInMonth(this._yearMax,this._monthMax),this._monthMax>1&&this._monthMax>12&&(this._monthMax=12,this._dayMax=31);var o=this._daysInMonth(this._yearMax,this._monthMax);this._dayMax>1&&this._dayMax>o&&(this._dayMax=o)}else this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMax=31;this._yearMax>=this._yearMin&&(this._monthMax>this._monthMin||this._monthMax===this._monthMin&&this._dayMax>=this._dayMin)||(this._yearMin=Number.MIN_VALUE,this._monthMin=1,this._dayMin=1,this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMaXx=31)}else this._yearMin=Number.MIN_VALUE,this._monthMin=1,this._dayMin=1,this._yearMax=Number.MAX_VALUE,this._monthMax=12,this._dayMax=31},_checkDateRange:function(e,t,i){return this._isValidDate(e,t+1,i)||(e=this._today.getFullYear(),t=this._today.getMonth(),i=this._today.getDate()),e>this._yearMax?(e=this._yearMax,t=this._monthMax-1,i=this._dayMax):this._yearMin>e&&(e=this._yearMin,t=this._monthMin-1,i=this._dayMin),e===this._yearMax&&t+1>this._monthMax?(t=this._monthMax-1,i=this._dayMax):e===this._yearMin&&this._monthMin>t+1&&(t=this._monthMin-1,i=this._dayMin),e===this._yearMax&&t+1===this._monthMax&&i>this._dayMax?i=this._dayMax:e===this._yearMin&&t+1===this._monthMin&&this._dayMin>i?i=this._dayMin:i>this._daysInMonth(e,t+1)&&(i=this._daysInMonth(e,t+1)),[e,t,i]},_showDefaultView:function(){this._yearSelector.style.display="none",this._monthSelector.style.display="none",this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",this._year<this._yearMin||this._year===this._yearMin&&this._month+1<=this._monthMin?this._monthPrev.childNodes[0].className="action_inactive":(this._year>this._yearMax||this._year===this._yearMax&&this._month+1>=this._monthMax)&&(this._monthNext.childNodes[0].className="action_inactive"),this._monthContainer.style.display="block"},_updateDate:function(){var e;this._options.displayInSelect?(e=[],this._isValidDate(e[0]=this._options.yearField[this._options.yearField.selectedIndex].value,e[1]=this._options.monthField[this._options.monthField.selectedIndex].value,e[2]=this._options.dayField[this._options.dayField.selectedIndex].value)?(e=this._checkDateRange(e[0],e[1]-1,e[2]),this._year=e[0],this._month=e[1],this._day=e[2]):(e=this._checkDateRange(e[0],e[1]-1,1),this._isValidDate(e[0],e[1]+1,e[2])&&(this._year=e[0],this._month=e[1],this._day=this._daysInMonth(e[0],e[1]),this.setDate()))):""!==this._dataField.value&&(this._isDate(this._options.format,this._dataField.value)?(e=this._getDataArrayParsed(this._dataField.value),e=this._checkDateRange(e[0],e[1]-1,e[2]),this._year=e[0],this._month=e[1],this._day=e[2]):(this._dataField.value="",this._year=this._data.getFullYear(),this._month=this._data.getMonth(),this._day=this._data.getDate()),this._data.setFullYear(this._year,this._month,this._day),this._dataField.value=this._writeDateInFormat()),this._updateDescription(),this._showMonth()},_updateDescription:function(){this._monthChanger.innerHTML=this._options.month[this._month+1],this._deText.innerHTML=this._options.ofText,this._yearChanger.innerHTML=this._year},_showYearSelector:function(){if(arguments.length){var e=+this._year+10*arguments[0];if(e-=e%10,e>this._yearMax||this._yearMin>e+9)return;this._year=+this._year+10*arguments[0]}for(var t="<li>",i=this._year-this._year%10,n=0;11>=n;n++)0===n%4&&(t+="<ul>"),t+=n&&11!==n?this._yearMax>=i+n-1&&i+n-1>=this._yearMin?'<li><a href="#" class="sapo_calyear_'+(i+n-1)+(i+n-1===this._data.getFullYear()?" sapo_cal_on":"")+'">'+(i+n-1)+"</a></li>":'<li><a href="#" class="sapo_cal_off">'+(i+n-1)+"</a></li>":n&&this._yearMax>=i+n-1&&i+n-1>=this._yearMin?'<li><a href="#year_next" class="change_year_next">'+this._options.nextLinkText+"</a></li>":this._yearMax>=i+n-1&&i+n-1>=this._yearMin?'<li><a href="#year_prev" class="change_year_prev">'+this._options.prevLinkText+"</a></li>":"<li>&nbsp;</li>",0===(n+1)%4&&(t+="</ul>");t+="</li>",this._yearSelector.innerHTML=t},_getDataArrayParsed:function(e){var t=[],i=r.set(this._options.format,e);return i&&(t=[i.getFullYear(),i.getMonth()+1,i.getDate()]),t},_isValidDate:function(e,t,i){var n=/^\d{4}$/,o=/^\d{1,2}$/;return n.test(e)&&o.test(t)&&o.test(i)&&t>=1&&12>=t&&i>=1&&this._daysInMonth(e,t)>=i},_isDate:function(e,t){try{if(e===void 0)return!1;var i=r.set(e,t);if(i&&this._isValidDate(i.getFullYear(),i.getMonth()+1,i.getDate()))return!0}catch(n){}return!1},_writeDateInFormat:function(){return r.get(this._options.format,this._data)},setDate:function(e){if("string"==typeof e&&/\d{4}-\d{1,2}-\d{1,2}/.test(e)){var t=e.split("-");this._year=t[0],this._month=t[1]-1,this._day=t[2]}this._setDate()},_setDate:function(e){e!==void 0&&e.className&&0===e.className.indexOf("sapo_cal_")&&(this._day=e.className.substr(9,2)),this._data.setFullYear.apply(this._data,this._checkDateRange(this._year,this._month,this._day)),this._options.displayInSelect?(this._options.dayField.value=this._data.getDate(),this._options.monthField.value=this._data.getMonth()+1,this._options.yearField.value=this._data.getFullYear()):this._dataField.value=this._writeDateInFormat(),this._options.onSetDate&&this._options.onSetDate(this,{date:this._data})},_updateCal:function(e){"function"==typeof this._options.onMonthSelected&&this._options.onMonthSelected(this,{year:this._year,month:this._month}),this._updateMonth(e),this._showMonth()},_daysInMonth:function(e,t){var i=31;switch(t){case 2:i=0===e%400||0===e%4&&0!==e%100?29:28;break;case 4:case 6:case 9:case 11:i=30}return i},_updateMonth:function(e){e===void 0&&(e="0");var t=this._month+1,i=this._year;switch(e){case-1:if(1===t){if(i===this._yearMin)return;t=12,i--}else t--;this._year=i,this._month=t-1;break;case 1:if(12===t){if(i===this._yearMax)return;t=1,i++}else t++;this._year=i,this._month=t-1;break;default:}},_dateParsers:{"yyyy-mm-dd":"Y-m-d","yyyy/mm/dd":"Y/m/d","yy-mm-dd":"y-m-d","yy/mm/dd":"y/m/d","dd-mm-yyyy":"d-m-Y","dd/mm/yyyy":"d/m/Y","dd-mm-yy":"d-m-y","dd/mm/yy":"d/m/y","mm/dd/yyyy":"m/d/Y","mm-dd-yyyy":"m-d-Y"},_showMonth:function(){var e,t,i=this._month+1,n=this._year,o=this._daysInMonth(n,i),s=new Date(n,i-1,1).getDay(),r=this._options.startWeekDay||0;this._monthPrev.childNodes[0].className="change_month_prev",this._monthNext.childNodes[0].className="change_month_next",this._yearMin>n||n===this._yearMin&&this._monthMin>=i?this._monthPrev.childNodes[0].className="action_inactive":(n>this._yearMax||n===this._yearMax&&i>=this._monthMax)&&(this._monthNext.childNodes[0].className="action_inactive"),r&&Number(r)&&(r>s?s=7+r-s:s+=r);var a="";for(a+='<ul class="sapo_cal_header">',e=0;7>e;e++)a+="<li>"+this._options.wDay[e+(r+e>6?r-7:r)].substring(0,1)+"</li>";a+="</ul>";var l=0;if(a+="<ul>",s)for(t=r;s-r>t;t++)l||(a+="<ul>"),a+='<li class="sapo_cal_empty">&nbsp;</li>',l++;for(e=1;o>=e;e++){7===l&&(l=0,a+="<ul>");var h="sapo_cal_"+(2===(e+"").length?e:"0"+e);h+=n===this._yearMin&&i===this._monthMin&&this._dayMin>e||n===this._yearMax&&i===this._monthMax&&e>this._dayMax||n===this._yearMin&&this._monthMin>i||n===this._yearMax&&i>this._monthMax||this._yearMin>n||n>this._yearMax||this._options.validDayFn&&!this._options.validDayFn.call(this,new Date(n,i-1,e))?" sapo_cal_off":this._data.getFullYear()===n&&this._data.getMonth()===i-1&&e===this._day?" sapo_cal_on":"",a+='<li><a href="#" class="'+h+'">'+e+"</a></li>",l++,7===l&&(a+="</ul>")}if(7!==l){for(e=l;7>e;e++)a+='<li class="sapo_cal_empty">&nbsp;</li>';a+="</ul>"}a+="</ul>",this._monthContainer.innerHTML=a},_setActiveMonth:function(e){e===void 0&&(e=this._monthSelector);var t=e.childNodes.length;if(e.className&&e.className.match(/sapo_calmonth_/)){var n=this._year,o=e.className.substr(14,2);n===this._data.getFullYear()&&o===this._data.getMonth()+1?(i.addClassName(e,"sapo_cal_on"),i.removeClassName(e,"sapo_cal_off")):(i.removeClassName(e,"sapo_cal_on"),n===this._yearMin&&this._monthMin>o||n===this._yearMax&&o>this._monthMax||this._yearMin>n||n>this._yearMax?i.addClassName(e,"sapo_cal_off"):i.removeClassName(e,"sapo_cal_off"))}else if(0!==t)for(var s=0;t>s;s++)this._setActiveMonth(e.childNodes[s])},lang:function(e){this._lang=e},showMonth:function(){this._showMonth()},isMonthRendered:function(){var e=o.select(".sapo_cal_header",this._containerObject)[0];return"none"!==i.getStyle(e.parentNode,"display")&&"none"!==i.getStyle(e.parentNode.parentNode,"display")}},a});
Ink.createModule("Ink.UI.Close","1",["Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Util.Array_1"],function(e,t,i){"use strict";var n=function(){e.observe(document.body,"click",function(n){var o=e.element(n);if(t.hasClassName(o,"ink-close")||t.hasClassName(o,"ink-dismiss")){var s;do if(o.className&&(s=o.className.split(" "),s&&(i.inArray("ink-alert",s)||i.inArray("ink-alert-block",s))))break;while(o=o.parentNode);o&&(e.stop(n),o.parentNode.removeChild(o))}})};return n});
Ink.createModule("Ink.UI.Toggle","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(e,t,i,n,o){"use strict";var s=function(t,i){if("string"!=typeof t&&"object"!=typeof t)throw"[Ink.UI.Toggle] Invalid CSS selector to determine the root element";if("string"==typeof t){if(this._rootElement=o.select(t),0>=this._rootElement.length)throw"[Ink.UI.Toggle] Root element not found";this._rootElement=this._rootElement[0]}else this._rootElement=t;if(this._options=Ink.extendObj({target:void 0,triggerEvent:"click",closeOnClick:!0},n.data(this._rootElement)),this._options=Ink.extendObj(this._options,i||{}),this._options.target===void 0)throw"[Ink.UI.Toggle] Target option not defined";this._childElement=e.elOrSelector(this._options.target,"Target"),this._init()};return s.prototype={_init:function(){this._accordion=i.hasClassName(this._rootElement.parentNode,"accordion")||i.hasClassName(this._childElement.parentNode,"accordion"),t.observe(this._rootElement,this._options.triggerEvent,Ink.bindEvent(this._onTriggerEvent,this)),"true"==""+this._options.closeOnClick&&t.observe(document,"click",Ink.bindEvent(this._onClick,this))},_onTriggerEvent:function(){if(this._accordion){var e,t,s;for(s=i.hasClassName(this._childElement.parentNode,"accordion")?this._childElement.parentNode:this._childElement.parentNode.parentNode,e=o.select(".toggle",s),t=0;e.length>t;t+=1){var r=n.data(e[t]),a=o.select(r.target,s);a.length>0&&a[0]!==this._childElement&&(a[0].style.display="none")}}var l="none"===i.getStyle(this._childElement,"display")?"show-all":"hide-all",h="none"===i.getStyle(this._childElement,"display")?"block":"none";i.removeClassName(this._childElement,"show-all"),i.removeClassName(this._childElement,"hide-all"),i.addClassName(this._childElement,l),this._childElement.style.display=h,"show-all"===l?i.addClassName(this._rootElement,"active"):i.removeClassName(this._rootElement,"active")},_onClick:function(e){var i,o=t.element(e);if(this._rootElement!==o&&!n.isAncestorOf(this._rootElement,o)&&!n.isAncestorOf(this._childElement,o)){if((i=Ink.ss(".ink-shade")).length)for(var s=i.length,r=0;s>r;r++)if(n.isAncestorOf(i[r],o)&&n.isAncestorOf(i[r],this._rootElement))return;this._dismiss(this._rootElement)}},_dismiss:function(){"none"!==i.getStyle(this._childElement,"display")&&(i.removeClassName(this._childElement,"show-all"),i.removeClassName(this._rootElement,"active"),i.addClassName(this._childElement,"hide-all"),this._childElement.style.display="none")}},s});
Ink.createModule("Ink.UI.Pagination","1",["Ink.UI.Aux_1","Ink.Dom.Event_1","Ink.Dom.Css_1","Ink.Dom.Element_1","Ink.Dom.Selector_1"],function(e,t,i,n,s){"use strict";var o=function(e){var t=document.createElement("a");return t.setAttribute("href","#"),t.innerHTML=e,t},r=function(t,i){if(this._options=Ink.extendObj({size:void 0,start:1,firstLabel:"First",lastLabel:"Last",previousLabel:"Previous",nextLabel:"Next",onChange:void 0,setHash:!1,hashParameter:"page"},i||{}),this._options.previousPageLabel||(this._options.previousPageLabel="Previous "+this._options.maxSize),this._options.nextPageLabel||(this._options.nextPageLabel="Next "+this._options.maxSize),this._handlers={click:Ink.bindEvent(this._onClick,this)},this._element=e.elOrSelector(t,"1st argument"),!e.isInteger(this._options.size))throw new TypeError("size option is a required integer!");if(!e.isInteger(this._options.start)&&this._options.start>0&&this._options.start<=this._options.size)throw new TypeError("start option is a required integer between 1 and size!");if(this._options.maxSize&&!e.isInteger(this._options.maxSize)&&this._options.maxSize>0)throw new TypeError("maxSize option is a positive integer!");if(0>this._options.size)throw new RangeError("size option must be equal or more than 0!");if(void 0!==this._options.onChange&&"function"!=typeof this._options.onChange)throw new TypeError("onChange option must be a function!");this._current=this._options.start-1,this._itemLiEls=[],this._init()};return r.prototype={_init:function(){this._generateMarkup(this._element),this._updateItems(),this._observe(),e.registerInstance(this,this._element,"pagination")},_observe:function(){t.observe(this._element,"click",this._handlers.click)},_updateItems:function(){var e,t,n,s=this._itemLiEls,r=this._options.size===s.length;if(r)for(e=0,t=this._options.size;t>e;++e)i.setClassName(s[e],"active",e===this._current);else{for(e=s.length-1;e>=0;--e)this._ulEl.removeChild(s[e]);for(s=[],e=0,t=this._options.size;t>e;++e)n=document.createElement("li"),n.appendChild(o(e+1)),i.setClassName(n,"active",e===this._current),this._ulEl.insertBefore(n,this._nextEl),s.push(n);this._itemLiEls=s}if(this._options.maxSize){var a=Math.floor(this._current/this._options.maxSize),l=this._options.maxSize*a,h=l+this._options.maxSize-1;for(e=0,t=this._options.size;t>e;++e)n=s[e],i.setClassName(n,"hide-all",l>e||e>h);this._pageStart=l,this._pageEnd=h,this._page=a,i.setClassName(this._prevPageEl,"disabled",!this.hasPreviousPage()),i.setClassName(this._nextPageEl,"disabled",!this.hasNextPage()),i.setClassName(this._firstEl,"disabled",this.isFirst()),i.setClassName(this._lastEl,"disabled",this.isLast())}i.setClassName(this._prevEl,"disabled",!this.hasPrevious()),i.setClassName(this._nextEl,"disabled",!this.hasNext())},_generateMarkup:function(e){i.addClassName(e,"ink-navigation");var t,n,r=!1;1>(t=s.select("ul.pagination",e)).length?(t=document.createElement("ul"),i.addClassName(t,"pagination")):(r=!0,t=t[0]),this._options.maxSize&&(n=document.createElement("li"),n.appendChild(o(this._options.firstLabel)),this._firstEl=n,i.addClassName(n,"first"),t.appendChild(n),n=document.createElement("li"),n.appendChild(o(this._options.previousPageLabel)),this._prevPageEl=n,i.addClassName(n,"previousPage"),t.appendChild(n)),n=document.createElement("li"),n.appendChild(o(this._options.previousLabel)),this._prevEl=n,i.addClassName(n,"previous"),t.appendChild(n),n=document.createElement("li"),n.appendChild(o(this._options.nextLabel)),this._nextEl=n,i.addClassName(n,"next"),t.appendChild(n),this._options.maxSize&&(n=document.createElement("li"),n.appendChild(o(this._options.nextPageLabel)),this._nextPageEl=n,i.addClassName(n,"nextPage"),t.appendChild(n),n=document.createElement("li"),n.appendChild(o(this._options.lastLabel)),this._lastEl=n,i.addClassName(n,"last"),t.appendChild(n)),r||e.appendChild(t),this._ulEl=t},_onClick:function(e){t.stop(e);var n=t.element(e);if("a"!==n.nodeName.toLowerCase()){do n=n.parentNode;while("a"!==n.nodeName.toLowerCase()&&n!==this._element);if(n===this._element)return}var s=n.parentNode;if("li"===s.nodeName.toLowerCase()&&!i.hasClassName(s,"active")&&!i.hasClassName(s,"disabled")){var o=i.hasClassName(s,"previous"),r=i.hasClassName(s,"next"),a=i.hasClassName(s,"previousPage"),l=i.hasClassName(s,"nextPage"),h=i.hasClassName(s,"first"),d=i.hasClassName(s,"last");if(h)this.setCurrent(0);else if(d)this.setCurrent(this._options.size-1);else if(a||l)this.setCurrent((a?-1:1)*this._options.maxSize,!0);else if(o||r)this.setCurrent(o?-1:1,!0);else{var c=parseInt(n.innerHTML,10)-1;this.setCurrent(c)}}},setSize:function(t){if(!e.isInteger(t))throw new TypeError("1st argument must be an integer number!");this._options.size=t,this._updateItems(),this._current=0},setCurrent:function(t,i){if(!e.isInteger(t))throw new TypeError("1st argument must be an integer number!");i&&(t+=this._current),0>t?t=0:t>this._options.size-1&&(t=this._options.size-1),this._current=t,this._updateItems(),this._options.onChange&&this._options.onChange(this)},getSize:function(){return this._options.size},getCurrent:function(){return this._current},isFirst:function(){return 0===this._current},isLast:function(){return this._current===this._options.size-1},hasPrevious:function(){return this._current>0},hasNext:function(){return this._current<this._options.size-1},hasPreviousPage:function(){return this._options.maxSize&&this._current>this._options.maxSize-1},hasNextPage:function(){return this._options.maxSize&&this._options.size-this._current>=this._options.maxSize+1},destroy:e.destroyComponent},r});